<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>archlinux进阶配置</title>
    <link href="/2024/11/29/arch-config/"/>
    <url>/2024/11/29/arch-config/</url>
    
    <content type="html"><![CDATA[<h1 id="archlinux-系统配置">archlinux 系统配置</h1><h2 id="终端">终端</h2><h3 id="zsh美化">zsh美化</h3><p>安装 ttf-meslo-nerd-font-powerlevel10k 字体：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S ttf-meslo-nerd-font-powerlevel10k  <span class="hljs-comment"># 我试过好像不用</span><br></code></pre></td></tr></table></figure><p>安装 powerlevel10k：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> --depth=1 https://gitee.com/romkatv/powerlevel10k.git ~/.config/powerlevel10k<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;source ~/.config/powerlevel10k/powerlevel10k.zsh-theme&#x27;</span> &gt;&gt;~/.zshrc<br><span class="hljs-comment"># 配置主题</span><br>p10k configure<br></code></pre></td></tr></table></figure><blockquote><p>教程：<ahref="https://github.com/romkatv/powerlevel10k">romkatv/powerlevel10k: AZsh theme</a></p></blockquote><p><br></p><h2 id="字体">字体</h2><p>Fontconfig配置（~/.config/fontconfig/fonts.conf）：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">fontconfig</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;fonts.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">fontconfig</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 显示器使用的像素排列方式. 现代显示器基本都是用rgb排列. --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;rgba&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">const</span>&gt;</span>rgb<span class="hljs-tag">&lt;/<span class="hljs-name">const</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 字体微调的程度, 可选为 hintnone, hintslight (默认), hintmedium, hintfull. --&gt;</span><br>  <span class="hljs-comment">&lt;!-- 简单来说，更高的 hinting 等级可以使字体更锐利，但同时也会损失更多的细节. --&gt;</span><br>  <span class="hljs-comment">&lt;!-- 如果你的显示器的 DPI 高得不像话 (&gt;=300), 那么就可以关闭 hinting, 因为字体会自然对齐像素. --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hintstyle&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">const</span>&gt;</span>hintslight<span class="hljs-tag">&lt;/<span class="hljs-name">const</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 抗锯齿. 除非你的屏幕DPI奇高否则建议开启. --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;antialias&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">bool</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- 关于lcdfilter, 因为我们在使用 FreeType2 自带的 Harmony 子像素渲染, 应该是不需要设置的. --&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 全局默认中文字体 --&gt;</span><br>  <span class="hljs-comment">&lt;!-- Default font for the zh_CN locale (no fc-match pattern) --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">compare</span>=<span class="hljs-string">&quot;contains&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lang&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>zh_CN<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;prepend&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 更改下一行即可, 以下同理 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- Fallback fonts preference order --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>sans-serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br><br><br>  <span class="hljs-comment">&lt;!-- 将 Liberation 系列对应到我们定义的优先字体上 --&gt;</span><br>  <span class="hljs-comment">&lt;!-- Map fonts that are commonly used by web pages to our preferred fonts --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Liberation Sans<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>sans-serif<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Liberation Mono<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>monospace<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">selectfont</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rejectfont</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">patelt</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> &gt;</span><br>          <span class="hljs-comment">&lt;!-- This font is causing problem with GitHub --&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Nimbus Sans<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">patelt</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">rejectfont</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">selectfont</span>&gt;</span><br>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">fontconfig</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>教程：<ahref="https://szclsya.me/zh-cn/posts/fonts/linux-config-guide/">Linux下的字体调校指南 - Leo's Field</a></p></blockquote><p><br></p><h2 id="常用应用">常用应用</h2><h3 id="微信">微信</h3><p>现在的微信4.0很好用了，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S wechat-universal-bwrap<br></code></pre></td></tr></table></figure><p>配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">wechat-universal --<span class="hljs-built_in">help</span><br><br><span class="hljs-comment"># 修改 ~/.config/wechat-universal/binds.list, 增加如下内容</span><br>/run/media/joelee<br>/home/joelee<br></code></pre></td></tr></table></figure><p><br></p><h3 id="qq">qq</h3><p>qq现在统一架构，linux下用得舒舒服服，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S linuxqq<br></code></pre></td></tr></table></figure><p><br></p><h3 id="vscode">vscode</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S visual-studio-code-bin<br></code></pre></td></tr></table></figure><p><br></p><h3 id="todesk">todesk</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S todesk-bin<br></code></pre></td></tr></table></figure><p><br></p><h3 id="nutstore">nutstore</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S nutstore<br></code></pre></td></tr></table></figure><p>首次打开软件，global syncpath虽然给了更改选项，但实际上也改不了；但是可以先取消每个要sync的文件夹的目录，不然nutstore会默认同步在~/Nutstore Files 。</p><p>为了防止 thunar 展示难看的 Nutstore Files 文件夹，可以在 ~/.hidden下添加文件夹的名字，这样打开thunar 就不会看见该文件夹了。</p><p><br></p><h3 id="zotero-jdk-pdftk">zotero (jdk, pdftk)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># jdk23 pdftk 茉莉花插件</span><br>paru -S jdk-openjdk pdftk  <span class="hljs-comment"># 496.67MB</span><br><span class="hljs-comment"># zotero</span><br>paru -S zotero-bin<br></code></pre></td></tr></table></figure><p><br></p><h3 id="wps">wps</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S wps-office-cn wps-office-mui-zh-cn<br></code></pre></td></tr></table></figure><p>首次打开提示：</p><ul><li>system dpi is asymmetric, WPS Office may have display issues.据说是因为WPS字体的问题，安装 win的字体后就好了。。。但我不太理解。</li><li>缺失公式符号字体，例如 Symbol, Wingdings, Wingdings2, Wingdings3,Webdings, MT Extra</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 新罗马</span><br>paru -S ttf-times-new-roman<br><br><span class="hljs-comment"># 字体文件 https://www.alipan.com/s/iwAqcvcU7vr 提取码: mwB2</span><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> -r custom /usr/share/fonts <br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chmod</span> 644 /usr/share/fonts/custom/*<br><span class="hljs-built_in">sudo</span> fc-cache -fsv<br><br><span class="hljs-comment"># 中文界面,删除其他语言的,就会应用中文了</span><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">rm</span> -rf /usr/lib/office6/mui/&#123;en_US,mn_CN,ru_RU,ug_CN&#125;<br></code></pre></td></tr></table></figure><p><br></p><h3 id="nodejs-nvm">nodejs (nvm)</h3><p>使用nvm管理node环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S nvm<br><br><span class="hljs-comment"># 换源</span><br>vim ~/.zshrc<br><span class="hljs-built_in">export</span> NVM_NODEJS_ORG_MIRROR=<span class="hljs-string">&quot;https://npmmirror.com/mirrors/node&quot;</span><br><span class="hljs-built_in">export</span> NVM_IOJS_ORG_MIRROR=<span class="hljs-string">&quot;https://npmmirror.com/mirrors/npm&quot;</span><br><span class="hljs-built_in">source</span> /usr/share/nvm/init-nvm.sh<br><br><br><span class="hljs-comment"># install node.js </span><br>nvm install --lts<br>nvm install node<br><span class="hljs-comment"># activate </span><br>nvm use v22.11.0<br><br><span class="hljs-comment"># 其他命令</span><br>nvm -v<br>nvm ls-remote<br>nvm uninstall nodejs版本号  <span class="hljs-comment"># 在此之前 nvm deactivate</span><br>nvm <span class="hljs-built_in">ls</span><br>nvm use node <span class="hljs-comment"># 切换到最新版</span><br></code></pre></td></tr></table></figure><p><br></p><h3 id="pandoc">pandoc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S pandoc-bin<br></code></pre></td></tr></table></figure><p><br></p><h3 id="typora">typora</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S typora<br></code></pre></td></tr></table></figure><p><br></p><h3 id="miniforge">miniforge</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S miniforge<br>mamba init zsh<br>conda config --<span class="hljs-built_in">set</span> auto_activate_base <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p><br></p><h3 id="rdp服务器">rdp服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S xrdp  <span class="hljs-comment"># 前端</span><br>paru -S xorgxrdp-glamor  <span class="hljs-comment"># 后端</span><br>paru -S  pipewire-module-xrdp  <span class="hljs-comment"># 声音</span><br><br><span class="hljs-built_in">sudo</span> vim /etc/X11/Xwrapper.config  <br><span class="hljs-comment"># 写入</span><br>allowed_users=anybody<br>needs_root_rights=no<br><br><br>paru -S xorg-xinit<br><span class="hljs-built_in">cp</span> /etc/X11/xinit/xinitrc ~/.xinitrc<br>vim ~/.xinitrc<br><span class="hljs-comment"># 注释后5行语句，然后写入</span><br><span class="hljs-built_in">export</span> DESKTOP_SESSION=plasma<br><span class="hljs-built_in">exec</span> startplasma-x11  <span class="hljs-comment"># 加上exec后xorg桌面会话结束后退出当前用户</span><br><br><br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> xrdp.service<br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> xrdp-sesman.service<br><br><span class="hljs-comment"># 用 remmina 做localhost的rdp连接</span><br><span class="hljs-comment"># 但是没成功。。。</span><br></code></pre></td></tr></table></figure><blockquote><p>教程：https://dalsidealland.com/2024/07/30/debug/arch%20Linux%20%E5%AE%89%E8%A3%85%20RDP%20%E7%BB%88%E6%9E%81%E6%95%99%E7%A8%8B/</p></blockquote><p>thinclient_drivers文件夹问题：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim /etc/xrdp/sesman.ini<br><span class="hljs-comment"># 修改为 FuseMountName=/home/joelee/.xrdp/thinclient_drives</span><br><span class="hljs-built_in">mkdir</span> -p ~/.xrdp/thinclient_drives<br><span class="hljs-built_in">sudo</span> systemctl restart xrdp xrdp-sesman<br></code></pre></td></tr></table></figure><p><br></p><h3 id="rdp客户端">rdp客户端</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S  remmina  freerdp<br></code></pre></td></tr></table></figure><p><br></p><h3 id="sddm自动登录">sddm自动登录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$USER</span>  <span class="hljs-comment"># joelee</span><br><span class="hljs-built_in">ls</span> -l /usr/share/xsessions/  <span class="hljs-comment"># plasmax11.desktop</span><br><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /etc/sddm.conf.d/<br><span class="hljs-built_in">sudo</span> vim /etc/sddm.conf.d/autologin.conf<br><span class="hljs-comment"># 写入</span><br>[Autologin]<br>User=joelee<br>Session=plasmax11<br></code></pre></td></tr></table></figure><p><br></p><h3 id="openssh">openssh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S openssh<br><span class="hljs-comment"># sshd.service</span><br></code></pre></td></tr></table></figure><p><br></p><h3 id="masterpdf">masterpdf</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S masterpdfeditor-free<br></code></pre></td></tr></table></figure><p><br></p><h3 id="wemeet">wemeet</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S wemeet-bin<br></code></pre></td></tr></table></figure><p><br></p><h3 id="blueman-蓝牙设置增强">blueman (蓝牙设置增强)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S blueman<br></code></pre></td></tr></table></figure><p><br></p><h3 id="qbittorrent-enhanced-peerbanhelper">qbittorrent-enhanced(peerbanhelper)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S qbittorrent-enhanced<br><span class="hljs-comment"># qbee 开启WebUI, 根据后面给出的链接</span><br><br><br><span class="hljs-comment"># peerbanhelper</span><br>paru -S p7zip<br><span class="hljs-built_in">mkdir</span> -p ~/.local/share/pbh<br><span class="hljs-built_in">cd</span> ~/Downloads<br>wget https://github.com/PBH-BTN/PeerBanHelper/releases/download/v7.1.5/PeerBanHelper_7.1.5.zip<br><br><span class="hljs-built_in">cd</span> ~/.local/share/pbh<br><span class="hljs-comment"># https://github.com/PBH-BTN/PeerBanHelper/discussions/475 </span><br><span class="hljs-comment"># 复制管理脚本到 pbh_manager.sh</span><br>pbh_manager.sh  <span class="hljs-comment"># 进行文件的复制和服务的建立</span><br><span class="hljs-comment"># 复制服务文件到 pbh.service</span><br><span class="hljs-comment"># 复制测试脚本到 test-start.sh</span><br>./test-start.sh<br><span class="hljs-comment"># 打开 http://localhost:9898</span><br><span class="hljs-comment"># 设置一个token,比如 aa-bb-cc-dd-ee-ff</span><br><span class="hljs-comment"># 添加下载器 类型：“qbee”，地址：“之前qbee的WebUI的地址”</span><br><span class="hljs-comment">#                      用户名和密码是“之前qbee的WebUI的用户名和地址”</span><br><span class="hljs-comment">#                      其他默认</span><br><br><br><span class="hljs-comment"># .zshrc</span><br><span class="hljs-built_in">alias</span> peerbanhelper=<span class="hljs-string">&quot;cd ~/.local/share/pbh &amp;&amp; ./test-start.sh&quot;</span><br></code></pre></td></tr></table></figure><p><ahref="https://pbh-btn.github.io/pbh-docs/docs/downloader/qBittorrent">qBittorrent| PeerBanHelper</a></p><p><ahref="https://trackerslist.com/#/">XIU2/TrackersListCollection</a></p><p><a href="pbh_manager_sh.txt">pbh_manager.sh</a></p><p><a href="pbh_service.txt">pbh.service</a></p><p><a href="test-start_sh.txt">test-start.sh</a></p><h2 id="常见问题">常见问题</h2><h3 id="breeze主题锁屏后黑屏">breeze主题锁屏后黑屏</h3><p>更换主题，安装 breath 主题</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S breath-theme-git<br></code></pre></td></tr></table></figure><p><br></p>]]></content>
    
    
    <categories>
      
      <category>archlinux</category>
      
      <category>系统配置</category>
      
    </categories>
    
    
    <tags>
      
      <tag>archlinux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>双系统 win11 + arch</title>
    <link href="/2024/11/25/arch-win11-dualsystem/"/>
    <url>/2024/11/25/arch-win11-dualsystem/</url>
    
    <content type="html"><![CDATA[<h1 id="为什么选择archlinux">为什么选择archlinux</h1><p>我曾经用了将近一年的Ubuntu22.04，她给我的感觉就是简单易用、适合新手，但是大版本迭代的问题导致只能使用较旧的软件包，比如Ubuntu22.04的内核版本大概是6.5左右，而截至2024年8月，内核版本即将更新到6.11。因此我更渴望滚动更新的archlinux，给我带来最新的特性和应用，并且它的“用户论坛”（AUR）是最活跃的linux用户群，里面充斥着大量的第三方应用。尽管在没使用前，我曾被她的“极难驾驭”所难倒，但我尝试了4、5次安装后发现，她给我的自由度真的很高，上了几次后就熟练了。</p><p><br></p><h1 id="参考链接">参考链接</h1><p><a href="https://arch.icekylin.online/">archlinux 简明指南</a></p><blockquote><p>UEFI+GPT+全新安装：采用三分区，<code>EFI系统分区（\boot）</code>、<code>交换分区（swap）</code>、<code>根分区（\）</code>。</p><p>建议双系统也这么分区，不要将arch的grub和win的系统分区混在一起，一块硬盘有多个EFI分区也是没有问题的。</p><p>如果在物理机上安装失败导致无法开机，还可以学习<code>winPE</code>（一种可以把自己装进内存的轻量win系统）来清楚所有分区，再重新安装，很简单的！</p></blockquote><p><br></p><h1 id="安装">安装</h1><p>电脑情况：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell">OS: Windows <span class="hljs-number">11</span> (专业工作站版) x86_64<br>Host: T6AD (Standard)<br>Kernel: WIN32_NT <span class="hljs-number">10.0</span>.<span class="hljs-number">22631.4460</span> (<span class="hljs-number">23</span>H2)<br>Shell: Windows PowerShell <span class="hljs-number">5.1</span>.<span class="hljs-number">22621.4391</span><br>Terminal: Windows Terminal <span class="hljs-number">1.21</span>.<span class="hljs-number">3231.0</span><br>CPU: AMD Ryzen <span class="hljs-number">7</span> <span class="hljs-number">7435</span>HS (<span class="hljs-number">16</span>) <span class="hljs-selector-tag">@</span> <span class="hljs-number">4.55</span> GHz<br>GPU: NVIDIA GeForce RTX <span class="hljs-number">4060</span> Laptop GPU (<span class="hljs-number">7.77</span> GiB) [<span class="hljs-type">Discrete</span>]<br></code></pre></td></tr></table></figure><p><br></p><h2 id="准备">准备</h2><ul><li><p>vim的基本操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">:wq  <span class="hljs-comment"># w是写入文件，q是退出编辑</span><br>:q!  <span class="hljs-comment"># 不保存，强制退出</span><br>gg   <span class="hljs-comment"># 回到文首</span><br>G    <span class="hljs-comment"># 回到文末</span><br><span class="hljs-built_in">dd</span>   <span class="hljs-comment"># 剪切光标所在行</span><br>2dd  <span class="hljs-comment"># 剪切光标所在行和下一行</span><br>/xx  <span class="hljs-comment"># 搜索&quot;xx&quot;，n下一个，N上一个</span><br>?xx  <span class="hljs-comment"># 反向搜索</span><br></code></pre></td></tr></table></figure></li><li><p>手机开热点，BIOS的无线网卡硬件开关处于打开状态</p></li><li><p>在<ahref="https://archlinux.org/download/">官网</a>下载archlinux的ISO映像，准备一个至少2G的U盘，将ISO文件烧录进U盘。另外，还需要用PGPsignature签名文件检查ISO的完整性和无误性。自己搜索校验的方法。</p></li><li><p>最好提前准备winPE启动U盘，方便清除分区</p></li><li><p>有至少48G的空闲空间</p></li><li><p><ahref="https://wiki.archlinux.org/title/System_time">设置window使用UTC时间</a></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 管理员</span><br>reg add <span class="hljs-string">&quot;HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation&quot;</span> /v RealTimeIsUniversal /d <span class="hljs-number">1</span> /t REG_DWORD /f<br></code></pre></td></tr></table></figure></li></ul><p><br></p><h2 id="进入arch安装环境">进入arch安装环境</h2><p>插入U盘，重启时狂按F2或F12，选择U盘启动，从而进入arch安装环境。</p><h2 id="安装arch">安装arch</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 禁用自动选择镜像源的服务，因为自动了后留下来的镜像源不一定正确</span><br>systemctl stop reflector.service<br>rmmod pcspkr <span class="hljs-comment">#禁止蜂鸣</span><br><br><br><span class="hljs-comment"># 2. 确认是UEFI模式</span><br><span class="hljs-built_in">ls</span> /sys/firmware/efi/efivars <br><br><br><span class="hljs-comment"># 3. 连接网络</span><br><span class="hljs-comment"># 连接无线wifi</span><br>iwctl  <span class="hljs-comment"># 进入交互式命令行</span><br>device list  <span class="hljs-comment"># 无线网卡wlan0</span><br>station wlan0 scan<br>station wlan0 get-networks<br>station wlan0 connect ****  <span class="hljs-comment"># 输入密码即可</span><br><span class="hljs-built_in">exit</span><br><br><span class="hljs-comment"># netplan连接有线网络</span><br>vim /etc/netplan/00-installer-config.yaml<br><span class="hljs-comment"># https://www.cnblogs.com/safe-rabbit/p/18312150</span><br>network:<br>  version: 2<br>  renderer: networkd<br>  wifis:<br>    wlp2s0b1:<br>      dhcp4: <span class="hljs-built_in">yes</span><br>      access-points:<br>        <span class="hljs-string">&quot;network_ssid_name&quot;</span>:<br>          password: <span class="hljs-string">&quot;**********&quot;</span><br><br><span class="hljs-comment"># 不能正确连接网络</span><br>ip <span class="hljs-built_in">link</span><br>ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> wlan0 up<br><span class="hljs-comment"># 报错 operation not possilble due to RF-kill，尝试解锁无线网卡</span><br>rfkill unblock wifi<br><br><br><span class="hljs-comment"># 4. 更新系统时钟</span><br>timedatectl set-ntp <span class="hljs-literal">true</span><br>timedatectl status<br><br><br><span class="hljs-comment"># 5. 分区</span><br>lsblk  <span class="hljs-comment"># 查看都有哪些磁盘，例如/dev/nvme0n1, /dev/sda</span><br>cfdisk /dev/nvme0n1  <span class="hljs-comment"># gpt, `EFI`:256M, `swap`: 4G, `剩下的`: linux filesystem, 注意退出交互界面前要先write再quit</span><br><br><br><span class="hljs-comment"># 6. 格式化分区</span><br>mkfs.vfat /dev/nvme0n1p1  <span class="hljs-comment"># .fat -F32 也可以</span><br>mkfs.btrfs -L myArch /dev/nvme0n1p3  <span class="hljs-comment"># -L 设置分区的label</span><br>mkswap /dev/nvme0n1p2<br><span class="hljs-comment"># 创建btrfs子卷</span><br>mount -t btrfs -o compress=zstd /dev/nvme0n1p3 /mnt  <span class="hljs-comment"># zstd 开启透明压缩</span><br>btrfs subvolume create /mnt/@<br>btrfs subvolume create /mnt/@home<br>btrfs subvolume list -p /mnt<br>umount /mnt<br><br><br><span class="hljs-comment"># 7. 挂载</span><br>mount -t btrfs -o subvol=/@,compress=zstd /dev/nvme0n1p3 /mnt<br><span class="hljs-built_in">mkdir</span> /mnt/home<br>mount -t btrfs -o subvol=/@home,compress=zstd /dev/nvme0n1p3 /mnt/home<br><span class="hljs-built_in">mkdir</span> /mnt/boot<br>mount /dev/nvme0n1p1 /mnt/boot<br>swapon /dev/nvme0n1p2<br>lsblk<br>free -h<br><br><br><span class="hljs-comment"># 8. 安装系统</span><br>pacstrap /mnt base base-devel linux linux-firmware btrfs-progs  <span class="hljs-comment"># base-devel是AUR安装包所必需，linux是内核软件包</span><br>pacstrap /mnt vim <span class="hljs-built_in">sudo</span> zsh zsh-completions networkmanager<br><br><br><span class="hljs-comment"># 9. 生成fstab</span><br>genfstab -U /mnt &gt; /mnt/etc/fstab<br><span class="hljs-built_in">cat</span> /mnt/etc/fstab<br></code></pre></td></tr></table></figure><h2 id="arch-chroot到新系统">arch-chroot到新系统</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs bash">arch-chroot /mnt<br><br><br><span class="hljs-comment"># 0 禁止蜂鸣</span><br>rmmod pcspkr<br>vim /etc/modprobe.d/blacklist.conf<br><span class="hljs-comment"># 添加 blacklist pcspkr</span><br><br><br><span class="hljs-comment"># 1. 设置主机名，hosts文件，时区</span><br>vim /etc/hostname  <span class="hljs-comment"># myarch</span><br>vim /etc/hosts<br><span class="hljs-comment"># 127.0.0.1 localhost</span><br><span class="hljs-comment"># ::1 localhost</span><br><span class="hljs-comment"># 127.0.1.1 myarch.localdomain myarch  # 也有说这句不需要</span><br><span class="hljs-built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime<br><br><br><span class="hljs-comment"># 2. 同步系统时间到硬件时间</span><br>hwclock --systohc<br><br><br><span class="hljs-comment"># 3. 设置软件使用的语言、书写习惯和字符集</span><br>vim /etc/locale.gen<br><span class="hljs-comment"># 取消&quot;en_US.UTF-8 UTF-8&quot;和&quot;zh_CN.UTF-8 UTF-8&quot;的注释</span><br>locale-gen<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;LANG=en_US.UTF-8&#x27;</span> &gt; /etc/locale.conf  <br><span class="hljs-comment"># 也有说要&quot;en_SG.UTF-8&quot;  # 也有说用`localectl set-locale LANG=en_US.UTF-8`</span><br><br><br><span class="hljs-comment"># 4. 设置root用户的密码</span><br>passwd root<br><br><br><span class="hljs-comment"># 5. 安装对应芯片制造商的微码</span><br><span class="hljs-comment"># pacman -S intel-ucode</span><br>pacman -S amd-ucode<br><br><br><span class="hljs-comment"># 6. 安装引导程序</span><br>pacman -S grub efibootmgr os-prober ntfs-3g<br><br>grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub  <br><span class="hljs-comment"># grub为自定义名字，也有说为ARCH</span><br><span class="hljs-comment"># 撤销grub-install,使用grub-uninstall /boot/grub</span><br><br>vim /etc/default/grub  <br><span class="hljs-comment"># 改成 GRUB_CMDLINE_LINUX_DEFAULT=&quot;loglevel=1 quiet&quot;</span><br><span class="hljs-comment"># 教程是 GRUB_CMDLINE_LINUX_DEFAULT=&quot;loglevel=5 nowatchdog&quot;,但我觉得没必要</span><br><span class="hljs-comment"># 取消GRUB_DISABLE_OS_PROBER=false的注释</span><br><br>grub-mkconfig -o /boot/grub/grub.cfg<br><span class="hljs-comment"># 撤销grub-mkconfig,使用 rm -rf /boot/grub/grub.cfg</span><br><span class="hljs-comment"># 检验撤销: grub-mkconfig </span><br><br><br><span class="hljs-comment"># 7. 完成安装</span><br><span class="hljs-built_in">exit</span><br>umount -R /mnt<br>reboot  <span class="hljs-comment"># 此时可以把U盘拔出来了</span><br><br><br><span class="hljs-comment"># 8. 进入新系统后，用root用户登录</span><br>systemctl <span class="hljs-built_in">enable</span> --now NetworkManager.service<br>ping www.baidu.com<br><span class="hljs-comment"># 无线连接: nmcli dev wifi list</span><br><span class="hljs-comment">#          nmcli dev wifi connect &quot;***&quot; password &quot;***&quot;</span><br>pacman -S fastfetch<br>fastfetch<br>poweroff <span class="hljs-comment"># 关机</span><br></code></pre></td></tr></table></figure><h2 id="桌面环境与应用">桌面环境与应用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 更新系统</span><br>pacman -Syu<br><br><br><span class="hljs-comment"># 2. 配置root的默认编辑器</span><br>vim ~/.bash_profile  <span class="hljs-comment"># export EDITOR=&#x27;vim&#x27;</span><br><br><br><span class="hljs-comment"># 3. 新建用户,之后重启用新用户登录</span><br>useradd -m -G wheel -s /bin/zsh joelee<br>passwd joelee<br>EDITOR=<span class="hljs-string">&#x27;vim&#x27;</span> visudo  <span class="hljs-comment"># 取消%wheel ALL=(ALL:ALL) ALL的注释</span><br><br><br><span class="hljs-comment"># 4. 开启32位支持和archlinuxcn</span><br>vim /etc/pacman.conf<br><span class="hljs-comment"># 取消[multilib]一节中两行的注释</span><br><span class="hljs-comment"># 添加[archlinuxcn]：</span><br><span class="hljs-comment"># [archlinuxcn]</span><br><span class="hljs-comment"># Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch</span><br>pacman -Syyu  <span class="hljs-comment"># 强制刷新数据库</span><br><br><span class="hljs-comment"># 提示GPG证书错误</span><br>pacman -S archlinux-keyring<br><br><br><span class="hljs-comment"># 5. 安装KDE-plasma</span><br>pacman -S plasma-meta kitty thunar<br><span class="hljs-comment"># 选择noto-fonts, ffmpeg, vlc</span><br><br><br><span class="hljs-comment"># 6. 启动sddm启动显示管理器</span><br>systemctl <span class="hljs-built_in">enable</span> --now sddm  <span class="hljs-comment"># 注意选择Xorg协议登录用户而不是Wayland</span><br><br><br><span class="hljs-comment"># 7. zsh做好常用应用</span><br><span class="hljs-built_in">sudo</span> pacman -S paru<br>paru -S sof-firmware alsa-firmware alsa-ucm-conf<br>paru -S noto-fonts-cjk noto-fonts-emoji noto-fonts-extra  <span class="hljs-comment"># 谷歌开源字体及表情</span><br>paru -S ark<br>paru -S gwenview<br>paru -S git wget<br>paru -S microsoft-edge-stable-bin<br>paru -S archlinux-keyring<br>paru -S archlinuxcn-keyring<br>paru -S bluez bluez-utils<br><span class="hljs-built_in">sudo</span> modprobe btusb<br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> --now bluetooth.service<br><br><br><span class="hljs-comment"># 8. 检查家目录</span><br><span class="hljs-built_in">cd</span> ~<br><span class="hljs-built_in">ls</span> -hl<br>xdg-user-dirs-update<br><br><br><span class="hljs-comment"># 9. 非root用户的默认编辑器</span><br>vim ~/.zshrc  <span class="hljs-comment"># 添加export EDITOR=&#x27;vim&#x27;</span><br><br><br><span class="hljs-comment"># 10. v2rayn</span><br>paru -S v2rayn-bin<br><span class="hljs-comment"># 配置v2rayn,因为下面输入法的各种词库要用代理</span><br><br><br><span class="hljs-comment"># 11. 输入法改用pinyin,不用雾凇输入法</span><br><span class="hljs-comment"># https://www.debuggerx.com/2023/09/20/fcitx5-customizer/</span><br>paru -S fcitx5-im fcitx5-chinese-addons <br><br>vim ~/.config/environment.d/im.conf<br><span class="hljs-comment"># 加入以下内容</span><br><span class="hljs-comment"># fix fcitx problem</span><br>GTK_IM_MODULE=fcitx<br>QT_IM_MODULE=fcitx<br>XMODIFIERS=@im=fcitx<br><span class="hljs-comment"># INPUT_METHOD=fcitx</span><br>SDL_IM_MODULE=fcitx<br>GLFW_IM_MODULE=ibus<br><br>wget https://www.debuggerx.com/fcitx5_customizer/fcitx5_customizer.sh<br>sh fcitx5_customizer.sh<br></code></pre></td></tr></table></figure><h2 id="nvidia驱动">nvidia驱动</h2><p>https://wiki.archlinuxcn.org/wiki/NVIDIA</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S nvidia  <span class="hljs-comment"># 4060</span><br>paru -S nvidia-settings nvidia-utils lib32-nvidia-utils<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>win11</category>
      
      <category>双系统</category>
      
    </categories>
    
    
    <tags>
      
      <tag>win11</tag>
      
      <tag>archlinux</tag>
      
      <tag>双系统</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Win11蓝牙问题</title>
    <link href="/2024/11/24/win11%E8%93%9D%E7%89%99%E9%97%AE%E9%A2%98/"/>
    <url>/2024/11/24/win11%E8%93%9D%E7%89%99%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<blockquote><p>更新，在尝试双系统后，蓝牙竟然能用了，win和archlinux都能用，搞不懂。。。</p></blockquote><p><strong>电脑环境</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs powershell">OS: Windows <span class="hljs-number">11</span> (专业工作站版) x86_64<br>Host: T6AD (Standard)<br>Kernel: WIN32_NT <span class="hljs-number">10.0</span>.<span class="hljs-number">22631.4460</span> (<span class="hljs-number">23</span>H2)<br>Shell: Windows PowerShell <span class="hljs-number">5.1</span>.<span class="hljs-number">22621.4391</span><br>Terminal: Windows Terminal <span class="hljs-number">1.21</span>.<span class="hljs-number">3231.0</span><br>CPU: AMD Ryzen <span class="hljs-number">7</span> <span class="hljs-number">7435</span>HS (<span class="hljs-number">16</span>) <span class="hljs-selector-tag">@</span> <span class="hljs-number">4.55</span> GHz<br>GPU: NVIDIA GeForce RTX <span class="hljs-number">4060</span> Laptop GPU (<span class="hljs-number">7.77</span> GiB) [<span class="hljs-type">Discrete</span>]<br><br>CPU/Chipset: Realtek RTL8852BE<span class="hljs-literal">-CG</span><br>Bluetooth: 蓝牙<span class="hljs-number">5.2</span> 版本号<span class="hljs-number">1.9</span>.<span class="hljs-number">1051.3010</span>  <span class="hljs-comment"># 在设备管理器的Realtek Bluetooth Adapter里看</span><br></code></pre></td></tr></table></figure><p><br></p><p><strong>症状</strong>：刚开始时可以顺利连接上无线耳机，仅仅过了一天，蓝牙连不上无线耳机，尝试过<strong>重装系统</strong>、<strong>重装蓝牙驱动</strong>，但仍然无济于事。。。</p><p><br></p><h1 id="查看蓝牙相关服务">查看蓝牙相关服务</h1><p>win + r ，输入 services.msc，找到下面三个服务，检查是否正在运行，</p><ul><li><strong>Bluetooth Support Service</strong> (蓝牙支持服务)</li><li><strong>Bluetooth Audio Gateway Service</strong>(蓝牙音频网关服务)</li><li><strong>Device Association Service</strong> (设备关联服务)</li></ul><p><br></p><h1 id="查看驱动启动情况">查看驱动启动情况</h1><p>设置 &gt; 蓝牙和其他设备 &gt; 显示更多设备 &gt; 更多蓝牙设置，点击硬件标签页，逐个双击打开查看事件是否正常，如下所示，(主要是adapter；device是微软自带的)</p><img src="/2024/11/24/win11%E8%93%9D%E7%89%99%E9%97%AE%E9%A2%98/image-20241124160841302.png" class="" title="image-20241124160841302"><p><br></p><h1 id="重装驱动">重装驱动</h1><p>（1）下载原厂蓝牙驱动，或去 Realtek 官网找</p><p>（2）卸载蓝牙驱动，win + x 打开设备管理器，右键卸载所有蓝牙驱动</p><p>（3）操作 &gt; 添加驱动程序，选择要搜索驱动的位置，勾选包括子文件夹，然后无脑下一步。扫描硬件。</p><img src="/2024/11/24/win11%E8%93%9D%E7%89%99%E9%97%AE%E9%A2%98/image-20241125122043737.png" class="" title="image-20241125122043737"><p>前前后后试了这么多驱动。。。。</p>]]></content>
    
    
    <categories>
      
      <category>win11</category>
      
      <category>bluetooth</category>
      
    </categories>
    
    
    <tags>
      
      <tag>win11</tag>
      
      <tag>bluetooth</tag>
      
      <tag>realtek</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>博客搭建</title>
    <link href="/2024/11/23/build-blog/"/>
    <url>/2024/11/23/build-blog/</url>
    
    <content type="html"><![CDATA[<h1 id="hexofluid博客搭建适配typora">hexo+fluid博客搭建(适配typora)</h1><blockquote><p>搭建完后，你可以放心用typora编辑md文档，用hexo部署网站</p></blockquote><p><br></p><h2 id="电脑环境"><strong>电脑环境</strong>：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell">OS: Windows <span class="hljs-number">11</span> (专业工作站版) x86_64<br>Host: T6AD (Standard)<br>Kernel: WIN32_NT <span class="hljs-number">10.0</span>.<span class="hljs-number">22631.4460</span> (<span class="hljs-number">23</span>H2)<br>Shell: Windows PowerShell <span class="hljs-number">5.1</span>.<span class="hljs-number">22621.4391</span><br>Terminal: Windows Terminal <span class="hljs-number">1.21</span>.<span class="hljs-number">3231.0</span><br>CPU: AMD Ryzen <span class="hljs-number">7</span> <span class="hljs-number">7435</span>HS (<span class="hljs-number">16</span>) <span class="hljs-selector-tag">@</span> <span class="hljs-number">4.55</span> GHz<br>GPU: NVIDIA GeForce RTX <span class="hljs-number">4060</span> Laptop GPU (<span class="hljs-number">7.77</span> GiB) [<span class="hljs-type">Discrete</span>]<br></code></pre></td></tr></table></figure><p><br></p><h2 id="安装git和nodejs"><strong>安装Git和Nodejs</strong>：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 记得开代理</span><br><span class="hljs-comment"># https://git-scm.com/downloads/win</span><br><span class="hljs-comment"># https://nodejs.org/en/download/package-manager</span><br>winget install <span class="hljs-literal">--id</span> Git.Git <span class="hljs-literal">-e</span> <span class="hljs-literal">--source</span> winget<br><br>node <span class="hljs-literal">-v</span><br>npm <span class="hljs-literal">-v</span><br>git <span class="hljs-literal">-v</span><br></code></pre></td></tr></table></figure><p><br></p><h2 id="安装hexo-cli"><strong>安装hexo-cli</strong>：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85</span><br><span class="hljs-comment"># 目录: C:\Users\joelee\AppData\Roaming\npm</span><br><span class="hljs-comment"># 命令 npm config list 查看npm配置</span><br>npm install <span class="hljs-literal">-g</span> hexo<span class="hljs-literal">-cli</span><br></code></pre></td></tr></table></figure><p><br></p><h3 id="hexo建站"><strong>hexo建站</strong>：</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># https://hexo.io/zh-cn/docs/setup</span><br><span class="hljs-built_in">cd</span> C:\Users\joelee\Me\blog<br><span class="hljs-comment"># 开代理,不成功的话删除所有文件即可</span><br>hexo init<br>npm install<br></code></pre></td></tr></table></figure><p><strong>项目文件夹</strong>(部分)如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs powershell">.<br>├── _config.yml   <span class="hljs-comment"># 网站的 配置 文件</span><br>├── package.json  <span class="hljs-comment"># 应用程序的信息,包括 EJS, Stylus 和 Markdown 渲染引擎</span><br>├── scaffolds     <span class="hljs-comment"># 模版 文件夹</span><br>├── source        <span class="hljs-comment"># 资源文件夹, 除 _posts 文件夹之外的`_.*`的文件/夹被忽略</span><br>|   ├── _drafts<br>|   └── _posts<br>└── themes       <span class="hljs-comment"># 主题 文件夹,用于生成静态网页</span><br></code></pre></td></tr></table></figure><p><br></p><h3id="使用markdown嵌入图片"><strong>使用markdown嵌入图片</strong>：</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># https://github.com/hexojs/hexo-renderer-markdown-it/</span><br>npm un hexo<span class="hljs-literal">-renderer-marked</span> <span class="hljs-literal">--save</span><br>npm i hexo<span class="hljs-literal">-renderer-markdown-it</span> <span class="hljs-literal">--save</span><br></code></pre></td></tr></table></figure><p>修改或添加以下内容到 _config.yml ：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">post_asset_folder:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">markdown:</span>  <br>  <span class="hljs-comment"># hexo-renderer-markdown-it --start--</span><br>  <span class="hljs-comment"># https://github.com/hexojs/hexo-renderer-markdown-it/</span><br>  <span class="hljs-attr">anchors:</span><br>    <span class="hljs-attr">collisionSuffix:</span> <span class="hljs-string">&#x27;-1&#x27;</span><br>  <span class="hljs-attr">images:</span><br>    <span class="hljs-attr">lazyload:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">prepend_root:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># root=/blog/时,![text](/path/to/image.jpg) -&gt; &lt;img src=&quot;/blog/path/to/image.jpg&quot; alt=&quot;text&quot;&gt;</span><br>    <span class="hljs-attr">post_asset:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># image.jpg处于/2020/01/02/blog1_asset/image.jpg,那么![](image.jpg) -&gt; &lt;img src=&quot;/2020/01/02/blog1_asset/image.jpg&quot;&gt;</span><br>  <span class="hljs-comment"># hexo-renderer-markdown-it --end--</span><br></code></pre></td></tr></table></figure><p><br></p><p><strong>使用 hexo-renderer-markdown-it的一个问题</strong>是，typora的引用图片和其他文件格式跟post_asset_folder开启后网页asset文件路径不对应，例如，在typora里引用一张图片，</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">![<span class="hljs-string">test.png</span>](<span class="hljs-link">helloworld/test.png</span>)<br></code></pre></td></tr></table></figure><p>但是在生成静态网页时，该图片的路径是，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">INFO  Generated: <span class="hljs-number">2024</span>/<span class="hljs-number">11</span>/<span class="hljs-number">23</span>/helloworld/test.png<br></code></pre></td></tr></table></figure><p>网页文档里图片的引用路径是，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">http://localhost:<span class="hljs-number">4000</span>/<span class="hljs-number">2024</span>/<span class="hljs-number">11</span>/<span class="hljs-number">23</span>/helloworld/helloworld/test.png<br></code></pre></td></tr></table></figure><p>因此导致图片无法正常展示。</p><p><strong>解决办法</strong>：安装<code>hexo-image-link</code>，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-image-link</span><br></code></pre></td></tr></table></figure><p><br></p><p><strong>hexo-image-link的问题</strong>是只处理类似![]()的格式，无法处理 []()这样普通的文件链接，因此我尝试将它的源代码修改成，</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><br><span class="hljs-comment">// match markdown image and covert to asset_img </span><br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">filter</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;before_post_render&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">extractFilename</span>(<span class="hljs-params">path, sep</span>) &#123;<br>        <span class="hljs-keyword">return</span> path.<span class="hljs-title function_">split</span>(sep).<span class="hljs-title function_">pop</span>();<br>    &#125;<br><br>    <span class="hljs-comment">// detect ![]() or []() pattern and convert path</span><br>    data.<span class="hljs-property">content</span> = data.<span class="hljs-property">content</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(!)?\[([^\[\]\n]*)\]\((.*)\s?(?:&quot;.*&quot;)?\)/g</span>,<br>        <span class="hljs-keyword">function</span>(<span class="hljs-params">match_str, isImage, label, path</span>)&#123;<br>            <span class="hljs-keyword">if</span> (isImage) &#123;<br>                <span class="hljs-comment">// image link</span><br>                <span class="hljs-comment">// if only one /</span><br>                <span class="hljs-keyword">if</span>( (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>)).<span class="hljs-property">length</span> == <span class="hljs-number">2</span>)&#123;<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Image Path: &quot;</span> + match_str);<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;asset_img string: &quot;</span> + <span class="hljs-string">&quot;&#123;% asset_img &quot;</span> + (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>))[<span class="hljs-number">1</span>] + <span class="hljs-string">&quot; &quot;</span> +  label + <span class="hljs-string">&quot; %&#125;&quot;</span> );<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&#123;% asset_img \&quot;&quot;</span> + (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>))[<span class="hljs-number">1</span>] + <span class="hljs-string">&quot;\&quot; \&quot;&quot;</span> +  label + <span class="hljs-string">&quot;\&quot; %&#125;&quot;</span> <br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>)).<span class="hljs-property">length</span> == <span class="hljs-number">3</span>  &amp;&amp; path.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>) == <span class="hljs-string">&quot;./&quot;</span> )&#123;<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Image Path: &quot;</span> + match_str);<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&#123;% asset_img \&quot;&quot;</span> + (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>))[<span class="hljs-number">2</span>] + <span class="hljs-string">&quot;\&quot; \&quot;&quot;</span> +  label + <span class="hljs-string">&quot;\&quot; %&#125;&quot;</span> <br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-comment">// console.debug(match_str);</span><br>                    <span class="hljs-comment">// console.debug(&quot;Label :&quot;+label);</span><br>                    <span class="hljs-comment">// console.debug(path);</span><br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Image Path does not exists!&quot;</span>);<br>                    <span class="hljs-keyword">return</span> match_str;<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">// regular link</span><br>                <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;\\&#x27;</span>) &amp;&amp; !path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;http&#x27;</span>)) &#123; <span class="hljs-comment">// Exclude URLs</span><br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Link Path: &quot;</span> + match_str);<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;link string: &quot;</span> + <span class="hljs-string">&quot;[&quot;</span> + label + <span class="hljs-string">&quot;](&quot;</span> + <span class="hljs-title function_">extractFilename</span>(path, <span class="hljs-string">&#x27;\\&#x27;</span>) + <span class="hljs-string">&quot;)&quot;</span>)<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;[&quot;</span> + label + <span class="hljs-string">&quot;](&quot;</span> + <span class="hljs-title function_">extractFilename</span>(path, <span class="hljs-string">&#x27;\\&#x27;</span>) + <span class="hljs-string">&quot;)&quot;</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;/&#x27;</span>) &amp;&amp; !path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;http&#x27;</span>)) &#123; <span class="hljs-comment">// Exclude URLs</span><br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Link Path: &quot;</span> + match_str);<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;link string: &quot;</span> + <span class="hljs-string">&quot;[&quot;</span> + label + <span class="hljs-string">&quot;](&quot;</span> + <span class="hljs-title function_">extractFilename</span>(path, <span class="hljs-string">&#x27;/&#x27;</span>) + <span class="hljs-string">&quot;)&quot;</span>)<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;[&quot;</span> + label + <span class="hljs-string">&quot;](&quot;</span> + <span class="hljs-title function_">extractFilename</span>(path, <span class="hljs-string">&#x27;/&#x27;</span>) + <span class="hljs-string">&quot;)&quot;</span>;<br>                &#125;<br>                <span class="hljs-keyword">return</span> match_str;<br>            &#125;<br><br>        &#125;);<br><br>    <span class="hljs-comment">// detect &lt;img &gt; pattern and convert path</span><br>    data.<span class="hljs-property">content</span> = data.<span class="hljs-property">content</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;img[^&gt;]+src=&quot;([^&quot;]+)&quot;/g</span>, <br>        <span class="hljs-keyword">function</span>(<span class="hljs-params">matchstr,  path</span>)&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;img tag found&quot;</span>)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(data.<span class="hljs-property">source_dir</span>)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(data.<span class="hljs-property">path</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;img src=\&quot;/&quot;</span> + data.<span class="hljs-property">path</span> + path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">&quot;\&quot; &quot;</span><br>        &#125;);<br><br>    <span class="hljs-keyword">return</span> data;<br>&#125;);<br></code></pre></td></tr></table></figure><p>修改 package-lock.json和package.json，固定版本：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs json"># <span class="hljs-attr">&quot;hexo-image-link&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.6&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;hexo-image-link&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.0.6&quot;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><blockquote><p>目前问题是有些格式的文件不支持，例如 .ymp。但肯定的是 .txt 支持</p></blockquote><p><br></p><p><strong>pwsh快捷预览和部署网站命令</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 添加到 C:\Users\joelee\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexocgs</span></span> &#123;<br>    hexo clean<br>    hexo generate<br>    hexo server<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexod</span></span> &#123;<br>    hexo deploy<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexoc</span></span> &#123;<br>    hexo clean<br>&#125;<br></code></pre></td></tr></table></figure><p><br></p><h3 id="主题"><strong>主题</strong>：</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># fluid https://github.com/fluid-dev/hexo-theme-fluid</span><br>npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-theme-fluid</span><br><span class="hljs-built_in">cp</span> node_modules\hexo<span class="hljs-literal">-theme-fluid</span>\_config.yml .\_config.fluid.yml<br><br><span class="hljs-comment"># 修改_config.yml</span><br>theme: fluid<br>language: zh<span class="hljs-literal">-CN</span><br><br><span class="hljs-comment"># 创建&quot;关于&quot;页</span><br>hexo new page about<br><span class="hljs-comment"># 编辑 source/about/index.md ,添加 `layout: about`</span><br></code></pre></td></tr></table></figure><p>静态资源文件夹为 node_modules-theme-fluid。</p><p>与该主题有关的插件的安装：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-generator-search</span><br>npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-math</span><br>npm uninstall hexo<span class="hljs-literal">-renderer-marked</span> <span class="hljs-literal">--save</span><br>npm install hexo<span class="hljs-literal">-renderer-pandoc</span> <span class="hljs-literal">--save</span><br>winget install <span class="hljs-literal">--source</span> winget <span class="hljs-literal">--exact</span> <span class="hljs-literal">--id</span> JohnMacFarlane.Pandoc<br></code></pre></td></tr></table></figure><p>修改相关的模板文件，包括刚才创建的about/index.md，酌情添加：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">categories:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Sports</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Baseball</span><br><span class="hljs-attr">tags:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Injury</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Fight</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Shocking</span><br><span class="hljs-attr">math:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">mermaid:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>fluid代码块设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">highlight:</span><br>    <span class="hljs-attr">highlightjs:</span><br>      <span class="hljs-comment"># 在链接中挑选 style 填入</span><br>      <span class="hljs-comment"># Select a style in the link</span><br>      <span class="hljs-comment"># See: https://highlightjs.org/demo/</span><br>      <span class="hljs-attr">style:</span> <span class="hljs-string">&quot;github gist&quot;</span><br>      <span class="hljs-attr">style_dark:</span> <span class="hljs-string">&quot;github-dark-dimmed&quot;</span><br></code></pre></td></tr></table></figure><p><br></p><h2 id="部署网站"><strong>部署网站</strong>：</h2><p>（1）登录 GitHub，新建一个 Repository，Repositoryname一定要是<code>你的用户名</code>.github.io</p><p>（2）复制仓库https链接，粘贴到<code>_config.yml</code>里：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">&#x27;git&#x27;</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/joelee-hit/joelee-hit.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br></code></pre></td></tr></table></figure><p>（3）安装插件，开始推送到仓库进行部署，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install hexo<span class="hljs-literal">-deployer-git</span> <span class="hljs-literal">--save</span><br>hexo clean<br>hexo generate<br>hexo deploy<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
      <category>hexo+typora</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
      <tag>typora</tag>
      
      <tag>fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>helloworld</title>
    <link href="/2024/11/23/helloworld/"/>
    <url>/2024/11/23/helloworld/</url>
    
    <content type="html"><![CDATA[<h1 id="公式测试">公式测试</h1><h2 id="内联">内联</h2><p><span class="math inline">\(\pi\)</span></p><h2 id="单独一行">单独一行</h2><p><span class="math display">\[a = b + \sum\limits_{i=0}^N c_i\]</span></p><h1 id="mermaid-测试">mermaid 测试</h1><pre><code class=" mermaid">classDiagramClass01 &lt;|-- AveryLongClass : CoolClass03 *-- Class04Class05 o-- Class06Class07 .. Class08Class09 --&gt; C2 : Where am i?Class09 --* C3Class09 --|&gt; Class07Class07 : equals()Class07 : Object[] elementDataClass01 : size()Class01 : int chimpClass01 : int gorillaClass08 &lt;--&gt; C2: Cool label</code></pre><h1 id="代码块测试">代码块测试</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hello world!\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="引用文件">引用文件</h1><p>点击可以跳转，参照 <ahref="https://lasonneil.github.io/2023/07/07/posts/Hexo添加附件下载功能/">Hexo添加附件下载功能| 清河的博客</a></p><p><a href="c.c">c.c</a></p><p><a href="config_fluid.txt">config_fluid</a></p><img src="/2024/11/23/helloworld/test.png" class="" title="test">]]></content>
    
    
    <categories>
      
      <category>Test</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Test</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
