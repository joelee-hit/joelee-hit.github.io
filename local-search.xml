<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>LearnTex</title>
    <link href="/2024/11/30/LearnTex/"/>
    <url>/2024/11/30/LearnTex/</url>
    
    <content type="html"><![CDATA[<p>系统：Ubuntu 22.04</p><h1>texlive安装和卸载</h1><p><a href="https://tug.org/texlive/doc/texlive-en/texlive-en.html#installation">full install documentation</a> <a href="https://tug.org/texlive/quickinstall.html">quickinstall</a> <a href="https://tug.org/texlive/doc/texlive-en/texlive-en.html#x1-380003.6">uninstall</a> <a href="https://mirrors.bfsu.edu.cn/help/CTAN/">北京外国语大学开源软件镜像站</a> <a href="https://mirrors.bfsu.edu.cn/CTAN/info/install-latex-guide-zh-cn/install-latex-guide-zh-cn.pdf">北京外国语大学开源软件镜像站提供的安装文档</a> <a href="https://tug.org/texlive/doc/install-tl.html">install-tl有关选项</a></p><p>以下是我推荐的<strong>安装</strong>流程：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /tmp<br>wget https://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz<br>zcat &lt; install-tl-unx.tar.gz | tar xf -  <span class="hljs-comment"># `zcat`解压缩.gz文件,`|`管道符,`tar xf -`解压缩.tar文件</span><br><span class="hljs-built_in">cd</span> install-tl-*<br><span class="hljs-built_in">sudo</span> ./install-tl --repository https://mirrors.bfsu.edu.cn/CTAN/systems/texlive/tlnet<br><span class="hljs-comment"># sudo perl ./install-tl -profile profile_file</span><br><span class="hljs-comment"># 默认使用 https://mirrors.jlu.edu.cn/CTAN/systems/texlive/tlnet/tlpkg/texlive.tlpdb 镜像？</span><br><span class="hljs-comment"># perl install-tl -help</span><br><br>vi ~/.bashrc<br><span class="hljs-comment"># 将 /usr/local/texlive/YYYY/bin/PLATFORM 添加到你的 PATH 环境变量里,例如/usr/local/texlive/2024/bin/x86_64-linux</span><br><span class="hljs-comment"># export PATH=/usr/local/texlive/2024/bin/x86_64-linux:/usr/local/texlive/2024/texmf-dist/scripts/latexindent:$PATH</span><br><span class="hljs-comment"># latexindent 是一个 Perl 脚本，用于自动缩进 LaTeX 代码</span><br><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><p>输出：deghijkstuvwxyznoABCEHIKLMNS</p><p><a href="https://www.cnblogs.com/eslzzyl/p/17358405.html">https://www.cnblogs.com/eslzzyl/p/17358405.html</a></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-type">B</span>scheme<span class="hljs-operator">-</span>custom<br><span class="hljs-type">S</span><span class="hljs-type">Select</span> collections: knostuvSwxymzABC(这些是不需要的语言包)  <span class="hljs-number">7367</span> <span class="hljs-type">MB</span><br><span class="hljs-type">D</span> <span class="hljs-keyword">set</span> directories:<br>   <span class="hljs-type">TEXDIR</span> (the main <span class="hljs-type">TeX</span> directory):<br>     <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span><span class="hljs-number">2024</span><br>   <span class="hljs-type">TEXMFLOCAL</span> (directory <span class="hljs-keyword">for</span> site<span class="hljs-operator">-</span>wide local files):<br>     <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span>texmf<span class="hljs-operator">-</span>local<br>   <span class="hljs-type">TEXMFSYSVAR</span> (directory <span class="hljs-keyword">for</span> variable and automatically generated data):<br>     <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span><span class="hljs-number">2024</span><span class="hljs-operator">/</span>texmf<span class="hljs-operator">-</span><span class="hljs-keyword">var</span><br>   <span class="hljs-type">TEXMFSYSCONFIG</span> (directory <span class="hljs-keyword">for</span> local config):<br>     <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span><span class="hljs-number">2024</span><span class="hljs-operator">/</span>texmf<span class="hljs-operator">-</span>config<br>   <span class="hljs-type">TEXMFVAR</span> (personal directory <span class="hljs-keyword">for</span> variable and automatically generated data):<br>     <span class="hljs-operator">~/</span>.texlive2024<span class="hljs-operator">/</span>texmf<span class="hljs-operator">-</span><span class="hljs-keyword">var</span><br>   <span class="hljs-type">TEXMFCONFIG</span> (personal directory <span class="hljs-keyword">for</span> local config):<br>     <span class="hljs-operator">~/</span>.texlive2024<span class="hljs-operator">/</span>texmf<span class="hljs-operator">-</span>config<br>   <span class="hljs-type">TEXMFHOME</span> (directory <span class="hljs-keyword">for</span> user<span class="hljs-operator">-</span>specific files):<br>     <span class="hljs-operator">~/</span><span class="hljs-type">App</span><span class="hljs-regexp">/Coder/</span>texmf<br>     <br> <span class="hljs-operator">----------------------------------------------------------------------</span><br> <span class="hljs-type">The</span> following environment variables contain the string <span class="hljs-string">&quot;tex&quot;</span><br> (<span class="hljs-keyword">case</span><span class="hljs-operator">-</span>independent).  <span class="hljs-type">If</span> you&#x27;re doing anything but adding personal<br> directories to the system paths, they may well cause trouble somewhere<br> <span class="hljs-keyword">while</span> running <span class="hljs-type">TeX</span>.  <span class="hljs-type">If</span> you encounter problems, <span class="hljs-keyword">try</span> unsetting them.<br> <br> <span class="hljs-type">Please</span> ignore spurious matches unrelated to <span class="hljs-type">TeX</span>. (<span class="hljs-type">To</span> omit this check,<br> <span class="hljs-keyword">set</span> the environment variable <span class="hljs-type">TEXLIVE_INSTALL_ENV_NOCHECK</span>.)<br><br>    <span class="hljs-type">SUDO_COMMAND</span><span class="hljs-operator">=</span><span class="hljs-operator">./</span>install<span class="hljs-operator">-</span>tl <span class="hljs-operator">--</span>repository https:<span class="hljs-comment">//mirrors.bfsu.edu.cn/CTAN/systems/texlive/tlnet</span><br>    <span class="hljs-type">TEXLIVE_INSTALL_NO_DISKCHECK</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><br> <span class="hljs-operator">----------------------------------------------------------------------</span><br><span class="hljs-type">Welcome</span> to <span class="hljs-type">TeX</span> <span class="hljs-type">Live</span>!<br><span class="hljs-type">See</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span><span class="hljs-number">2024</span><span class="hljs-operator">/</span>index.html <span class="hljs-keyword">for</span> links to documentation.<br><br><span class="hljs-type">The</span> <span class="hljs-type">TeX</span> <span class="hljs-type">Live</span> web site (https:<span class="hljs-comment">//tug.org/texlive/) provides all updates</span><br>and corrections. <span class="hljs-type">TeX</span> <span class="hljs-type">Live</span> <span class="hljs-keyword">is</span> a joint project of the <span class="hljs-type">TeX</span> user groups<br>around the world; please consider supporting it by joining the group<br>best <span class="hljs-keyword">for</span> you. <span class="hljs-type">The</span> list of groups <span class="hljs-keyword">is</span> available on the web<br>at https:<span class="hljs-comment">//tug.org/usergroups.html.</span><br><br><span class="hljs-type">Add</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span><span class="hljs-number">2024</span><span class="hljs-regexp">/texmf-dist/</span>doc<span class="hljs-operator">/</span>man to <span class="hljs-type">MANPATH</span>.<br><span class="hljs-type">Add</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span><span class="hljs-number">2024</span><span class="hljs-regexp">/texmf-dist/</span>doc<span class="hljs-operator">/</span>info to <span class="hljs-type">INFOPATH</span>.<br><span class="hljs-type">Most</span> importantly, add <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span><span class="hljs-number">2024</span><span class="hljs-regexp">/bin/</span>x86_64<span class="hljs-operator">-</span>linux<br>to your <span class="hljs-type">PATH</span> <span class="hljs-keyword">for</span> current and future sessions.<br><br>Logfile: <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/texlive/</span><span class="hljs-number">2024</span><span class="hljs-operator">/</span>install<span class="hljs-operator">-</span>tl.log<br></code></pre></td></tr></table></figure><p><strong>卸载</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">vi ~/.bashrc  <span class="hljs-comment"># 有关 texlive 的删掉</span><br>tlmgr uninstall --all<br><span class="hljs-comment"># 若无权限,sudo /usr/local/texlive/2023/bin/x86_64-linux/tlmgr uninstall --all</span><br><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">symlinks... TLUtils::remove_link_dir_dir: destination /usr/local/share/info not writable, no removal of links <span class="hljs-keyword">done</span>!  <span class="hljs-comment"># 其实根本没有提到的文件夹</span><br>TLUtils::remove_link_dir_dir: destination /usr/local/share/man/man1 not writable, no removal of links <span class="hljs-keyword">done</span>!<br>TLUtils::remove_link_dir_dir: destination /usr/local/share/man/man5 not writable, no removal of links <span class="hljs-keyword">done</span>!<br>TLUtils::add_remove_symlinks: remove of symlinks had 3 error(s), see messages above.<br><span class="hljs-comment"># 此时 /usr/local/texlive 下只有 texmf-local 这个文件夹, 116K, 很小</span><br><span class="hljs-comment"># 也删除了 ~/.texlive2024</span><br></code></pre></td></tr></table></figure><p><strong>永久修改镜像</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">tlmgr option repository https://mirrors.bfsu.edu.cn/CTAN/systems/texlive/tlnet<br><span class="hljs-comment"># or sudo /usr/local/texlive/2023/bin/x86_64-linux/tlmgr option repository https://mirrors.bfsu.edu.cn/CTAN/systems/texlive/tlnet</span><br></code></pre></td></tr></table></figure><h1>Latex命令</h1><h2 id="包管理器tlmgr">包管理器tlmgr</h2><h3 id="更新自身">更新自身</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> /usr/local/texlive/2024/bin/x86_64-linux/tlmgr update --self<br></code></pre></td></tr></table></figure><p>由于权限问题以及root的PATH没有tlmgr命令，所以只能使用tlmgr的绝对命令。</p><h3 id="更新所有包">更新所有包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> /usr/local/texlive/2024/bin/x86_64-linux/tlmgr update --all<br></code></pre></td></tr></table></figure><p>输出如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">tlmgr: package repository https://mirrors.bfsu.edu.cn/CTAN/systems/texlive/tlnet (verified)<br>tlmgr: saving backups to /usr/local/texlive/2023/tlpkg/backups<br>[  1/437] auto-remove: lualatex-doc ... <span class="hljs-keyword">done</span><br>[  2/437] auto-remove: iwhdp ... <span class="hljs-keyword">done</span><br>[  3/437, ??:??/??:??] update: abntexto [207k] (68554 -&gt; 68837) ... <span class="hljs-keyword">done</span><br>[  4/437, 00:02/02:23:14] update: achemso [911k] (65103 -&gt; 69638) ... <span class="hljs-keyword">done</span><br>[  5/437, 00:05/01:06:12] update: acmart [4564k] (68550 -&gt; 69721) ... <span class="hljs-keyword">done</span><br>...<br></code></pre></td></tr></table></figure><h3 id="查看是否带有某包">查看是否带有某包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">tlmgr search --global --file hithesis.cls<br><span class="hljs-comment"># tlmgr: package repository https://mirrors.bfsu.edu.cn/CTAN/systems/texlive/tlnet (verified)</span><br><span class="hljs-comment"># hithesis:</span><br><span class="hljs-comment"># texmf-dist/tex/xelatex/hithesis/hithesis.cls</span><br></code></pre></td></tr></table></figure><p>由此可知某包的目录为：<code>/usr/local/texlive/2023/texmf-dist/tex/xelatex/hithesis</code></p><p>包下面通常会有以下格式文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">ctex-fontset-siyuan.def  <span class="hljs-comment"># ctex宏包的字体配置文件</span><br>hithesis.cfg  <span class="hljs-comment"># hithesis的配置文件,、用于指定如标题、作者、学号</span><br>hithesis.cls  <span class="hljs-comment"># hithesis的主要类文件,定义了包括标题页、目录、正文等的格式</span><br>hithesis.sty  <span class="hljs-comment"># hithesis的样式文件,一些额外的排版样式,如页眉页脚</span><br></code></pre></td></tr></table></figure><h2 id="texlive">texlive</h2><h3 id="安装目录">安装目录</h3><p><code>/usr/local/texlive/</code></p><h3 id="升级">升级</h3><p>太麻烦了，不升级，又用不了tlmgr的命令。。。</p><h2 id="查看宏包文档">查看宏包文档</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">texdoc xeCJK<br></code></pre></td></tr></table></figure><p>注意要ctrl+C退出，不要关掉pdf阅读器后再ctrl+C</p><h1>开源编辑器</h1><h2 id="spacemacs">spacemacs</h2><h1>latex学习</h1><h2 id="基本模板">基本模板</h2><p>请参考《LaTex入门》刘海洋版 第1章中有关第一篇文章。<code>test.tex</code>：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% -*- coding: UTF-8 -*-</span><br><span class="hljs-comment">% gougu.tex</span><br><span class="hljs-comment">% 勾股定理</span><br><br><span class="hljs-keyword">\documentclass</span>[UTF8,fontset=windows]&#123;ctexart&#125; <span class="hljs-comment">% fontset=windows，解决xeCJK字体问题</span><br><span class="hljs-comment">% 基本信息</span><br><span class="hljs-keyword">\title</span>&#123;<span class="hljs-keyword">\heiti</span> 杂谈勾股定理&#125;<br><span class="hljs-keyword">\author</span>&#123;<span class="hljs-keyword">\kaishu</span> 李四&#125;<br><span class="hljs-keyword">\date</span>&#123;<span class="hljs-keyword">\today</span>&#125;<br><br><span class="hljs-keyword">\bibliographystyle</span>&#123;plain&#125;<br><br><span class="hljs-comment">% 导包</span><br><span class="hljs-keyword">\usepackage</span>&#123;amsmath&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;lmodern&#125; <span class="hljs-comment">% 解决Size substitutions with differences 问题</span><br><span class="hljs-keyword">\usepackage</span>&#123;graphicx&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;float&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;geometry&#125;<br><span class="hljs-keyword">\geometry</span>&#123;a6paper,centering,scale=0.8&#125;<br><span class="hljs-keyword">\usepackage</span>[format=hang,font=small,textfont=it]&#123;caption&#125;<br><span class="hljs-keyword">\usepackage</span>[nottoc]&#123;tocbibind&#125;<br><br><span class="hljs-comment">% 自定义环境和命令</span><br><span class="hljs-keyword">\newtheorem</span>&#123;thm&#125;&#123;定理&#125;<br><span class="hljs-keyword">\newenvironment</span>&#123;myquote&#125;&#123;<span class="hljs-keyword">\begin</span>&#123;quote&#125;<span class="hljs-keyword">\zihao</span>&#123;-5&#125;<span class="hljs-keyword">\kaishu</span>&#125;&#123;<span class="hljs-keyword">\end</span>&#123;quote&#125;&#125;<br><span class="hljs-keyword">\newcommand</span>*&#123;<span class="hljs-keyword">\degree</span>&#125;&#123;<span class="hljs-built_in">^</span><span class="hljs-keyword">\circ</span>&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-comment">% 标题页、目录页</span><br><span class="hljs-keyword">\maketitle</span><br><span class="hljs-keyword">\begin</span>&#123;abstract&#125;<br>    这是一篇关于勾股定理的小短文。<br><span class="hljs-keyword">\end</span>&#123;abstract&#125;<br><span class="hljs-keyword">\tableofcontents</span><br><span class="hljs-keyword">\newpage</span><br><span class="hljs-comment">% 第一节</span><br><span class="hljs-keyword">\section</span>&#123;勾股定理在古代 <span class="hljs-keyword">\label</span>&#123;section:first&#125;&#125;<br>西方称勾股定理为毕达哥拉斯定理，将勾股定理的发现归结于公元前 6 世界的毕达哥拉斯学派 <span class="hljs-keyword">\cite</span>&#123;Kline&#125; 。该学派得到了一个法则，可以求出可排成直角三角形三边的三元数组。毕达哥拉斯学派没有书面著作，该定理的严格表述和证明见于欧几里得 <span class="hljs-keyword">\footnote</span>&#123;欧几里得，约公元前 330--275年。&#125;《几何原本》的命题 47 ：“直角三角形斜边上的正方形等于两直角边上的两个正方之和。”证明是用面积做的。<br><br>我国《周髀算经》载商高（约公元前 12 世纪）答周公问：<br><span class="hljs-keyword">\begin</span>&#123;myquote&#125;<br>    勾广三，股修四，径隅五。<br><span class="hljs-keyword">\end</span>&#123;myquote&#125;<br>又载陈子（约公元前 7--6 世纪）答荣方问：<br><span class="hljs-keyword">\begin</span>&#123;myquote&#125;<br>    若求邪至日者，以日下为勾，日高为股，勾股各自乘，并而开方除之，得邪至日。<br><span class="hljs-keyword">\end</span>&#123;myquote&#125;<br>都较古希腊更早。后者已经明确道出勾股定理的一般形式。图 <span class="hljs-keyword">\ref</span>&#123;fig:xiantu&#125; 是我国对勾股定理的一种证明 <span class="hljs-keyword">\cite</span>&#123;quanjing&#125;。<br><span class="hljs-keyword">\begin</span>&#123;figure&#125;[ht]<br>    <span class="hljs-keyword">\centering</span><br>    <span class="hljs-keyword">\includegraphics</span>[scale=0.6]&#123;R/1.png&#125;<br>    <span class="hljs-keyword">\caption</span>&#123;宋赵爽在《周髀算经》注中作的弦图（仿制），该图绘出了勾股定理的一个极其对称美的证明。&#125;<br>    <span class="hljs-keyword">\label</span>&#123;fig:xiantu&#125;<br><span class="hljs-keyword">\end</span>&#123;figure&#125;<br><span class="hljs-comment">% 第二节</span><br><span class="hljs-keyword">\section</span>&#123;勾股定理的近代形式&#125;<br>勾股定理可以用现代语言表述如下：<br><span class="hljs-keyword">\begin</span>&#123;thm&#125;[勾股定理]<br>    直角三角形斜边的平方等于两腰的平方和。<br><br>    可以用符号语言表述为：设直角三角形 ABC ，其中 <span class="hljs-built_in">$</span><span class="hljs-keyword">\angle</span> C = 90<span class="hljs-keyword">\degree</span><span class="hljs-built_in">$</span> ，则有<br><br>    <span class="hljs-keyword">\begin</span>&#123;equation&#125;<span class="hljs-keyword">\label</span>&#123;eq:gougu&#125;<br>        AB<span class="hljs-built_in">^</span>2 = BC<span class="hljs-built_in">^</span>2 + AC<span class="hljs-built_in">^</span>2<br>    <span class="hljs-keyword">\end</span>&#123;equation&#125;<br><span class="hljs-keyword">\end</span>&#123;thm&#125;<br><br>满足式 <span class="hljs-keyword">\eqref</span>&#123;eq:gougu&#125; 的整数称为<span class="hljs-keyword">\emph</span>&#123;勾股数&#125;。第 <span class="hljs-keyword">\ref</span>&#123;section:first&#125; 节所说毕达哥拉斯学派得到的三元数组就是勾股数。下表列出一些较小的勾股数：<br><span class="hljs-keyword">\begin</span>&#123;table&#125;[H]<br>    <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|rrr|&#125;<br>        <span class="hljs-keyword">\hline</span><br>        直角边 <span class="hljs-built_in">$</span>a<span class="hljs-built_in">$</span> <span class="hljs-built_in">&amp;</span> 直角边 <span class="hljs-built_in">$</span>b<span class="hljs-built_in">$</span> <span class="hljs-built_in">&amp;</span> 斜边 <span class="hljs-built_in">$</span>c<span class="hljs-built_in">$</span> <span class="hljs-keyword">\\</span><br>        <span class="hljs-keyword">\hline</span><br>        3 <span class="hljs-built_in">&amp;</span> 4 <span class="hljs-built_in">&amp;</span> 5 <span class="hljs-keyword">\\</span><br>        5 <span class="hljs-built_in">&amp;</span> 12 <span class="hljs-built_in">&amp;</span> 13 <span class="hljs-keyword">\\</span><br>        <span class="hljs-keyword">\hline</span><br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\qquad</span><br>    (<span class="hljs-built_in">$</span>a<span class="hljs-built_in">^</span>2 + b<span class="hljs-built_in">^</span>2 = c<span class="hljs-built_in">^</span>2<span class="hljs-built_in">$</span>)<br><span class="hljs-keyword">\end</span>&#123;table&#125;<br><span class="hljs-comment">% 参考文献</span><br><span class="hljs-keyword">\nocite</span>&#123;Shiye&#125;<br><span class="hljs-keyword">\bibliography</span>&#123;math&#125;<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>同目录下的<code>math.bib</code>：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% This file was created with JabRef 2.6</span><br><span class="hljs-comment">% Encoding: UTF8</span><br><br>@BOOK&#123;Kline,<br>    title=&#123;古今数学思想&#125;,<br>    publisher=&#123;上海科学技术出版社&#125;,<br>    year=&#123;2002&#125;,<br>    author=&#123;克莱因&#125;,<br>&#125;<br><br>@ARTICLE&#123;quanjing,<br>    author=&#123;曲安京&#125;,<br>    title=&#123;商高、赵爽与刘徽关于勾股定理的证明&#125;,<br>    journal=&#123;数学传播&#125;,<br>    year=&#123;1998&#125;,<br>    volume=&#123;20&#125;,<br>    number=&#123;3&#125;<br>&#125;<br><br>@BOOK&#123;Shiye,<br>    title=&#123;几何的有名定理&#125;,<br>    publisher=&#123;上海科学技术出版社&#125;,<br>    year=&#123;1986&#125;,<br>    author=&#123;矢野健太郎&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-组织文本">2 组织文本</h2><h3 id="2-1-文字与符号">2.1 文字与符号</h3><blockquote><p>TEX引擎传统上使用扩展ASCII字符集，最新的使用UTF-8编码。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看Tex引擎处理文本使用的字符集的命令</span><br><span class="hljs-built_in">cat</span> /usr/local/texlive/2023/texmf-dist/web2c/texmf.cnf | grep encoding<br><span class="hljs-comment"># 或 cat /usr/local/texlive/2023/texmf.cnf | grep encoding</span><br><span class="hljs-comment"># command_line_encoding = utf-8</span><br></code></pre></td></tr></table></figure></blockquote><p>常用的<strong>字母表</strong>包括扩展的拉丁字母、希腊字母和西里尔字母。若想正确输入这些字母，现代方法使用<code>UTF-8</code>编码直接输入，传统方法使用<code>给字母加上重音标记</code>等。</p><blockquote><p>café（拉丁字母） χαϊδεύης（希腊语） Крюкова（俄语）</p><p><code>XELATEX</code>的字体是<code>Latin Modern</code>，但实际使用若想使用还得导入<code>lmodern</code>包？</p></blockquote><p>例子：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;ctexart&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br>café Gödel Antonín Dvořák Øster Vrå Kırkağaç<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>关于<strong>符号</strong>：</p><ul><li>双引号是<code>'' </code>，而不是<code>“</code></li><li><code>| &lt; &gt; + =</code>一般不使用</li><li></li></ul><p>关于<strong>空格和换行</strong>：</p><p>多个空格相当于一个空格，多个换行相当于一个换行。<strong>只有字符后面的空格是有效的</strong>。用连续两个换行表示<strong>分段</strong>。<code>\\</code>直接另起一行，不分段。</p><blockquote><p>以字母命名的宏，后面的空格会被忽略，例如<code>\TeX</code>。</p><p><code>带子(ties)</code>是不可打断的空格，例如<code>Mr.~Knuth</code></p><p><code>\par</code>只在命令或环境定义的内部使用，起分段作用。</p></blockquote><img src="/2024/11/30/LearnTex/image-20240405204507824.png" class="" title="image-20240405204507824"> <p>因为<code>\\</code>表示换行。</p><h2 id="5-绘制图表">5 绘制图表</h2><h3 id="5-3-浮动体与标题控制">5.3 浮动体与标题控制</h3><p><strong>5.3.2 标题控制与caption宏包</strong>：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\usepackage</span>[font=small,labelfont=bf]&#123;caption&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;caption&#125;<br><span class="hljs-params">#</span> 字体大小，数字标签的字体格式，后面文字的字体格式，标题的格式，标签编号的格式，标签与后面标题的距离，多行浮动标题的对齐格式，多行标题的对齐格式是否用于单行标题<br><span class="hljs-keyword">\captionsetup</span>[figure]&#123;font=small,labelfont=bf,textfont=?,format=?,labelformat=?,labelsep=?,justification=?,singlelinecheck=&#123;true,false&#125;&#125;<br><br><span class="hljs-keyword">\caption</span>[format=?]&#123;图或表标题&#125;<br></code></pre></td></tr></table></figure><p>5.9 查看 caption 宏包手册 Sommerfeldt [238]，如果需要把标题的中文字体改为隶书，应该如何设置？</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\setCJKfamilyfont</span>&#123;li&#125;&#123;隶书&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;caption&#125;<br><span class="hljs-keyword">\DeclareCaptionFont</span>&#123;lishu&#125;&#123;<span class="hljs-keyword">\CJKfamily</span>&#123;li&#125;&#125;<br><span class="hljs-keyword">\captionsetup</span>&#123;font=lishu&#125;<br><span class="hljs-params">#</span> 试过，应该是texlive没有隶书相关的字体<br></code></pre></td></tr></table></figure><p>5.10 查看宏包手册 Sommerfeldt [238]，看看 caption 宏包的 hypcap 参数有什么作用？</p><p><strong>5.3.3 并排和子图表</strong>：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-comment">% 表格并排 直接放在一个浮动体里即可. 图表并排同理</span><br><span class="hljs-keyword">\begin</span>&#123;table&#125;<br><span class="hljs-keyword">\centering</span><br><span class="hljs-keyword">\caption</span>&#123;并排的表格&#125;<br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|&#125;<br><span class="hljs-keyword">\hline</span> 图 <span class="hljs-built_in">&amp;</span> 表 <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<span class="hljs-comment">%</span><br><span class="hljs-keyword">\qquad</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|&#125;<br><span class="hljs-keyword">\hline</span> Figure <span class="hljs-built_in">&amp;</span> Table <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span> A <span class="hljs-built_in">&amp;</span> B <span class="hljs-keyword">\\</span> <span class="hljs-keyword">\hline</span><br><span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-keyword">\end</span>&#123;table&#125;<br><br><span class="hljs-comment">% 文字与图并排，文字需要用\parbox子段盒子或minipage环境包裹起来</span><br><span class="hljs-keyword">\begin</span>&#123;figure&#125;<br>    <span class="hljs-keyword">\centering</span><br>    <span class="hljs-keyword">\includegraphics</span>[width=0.4<span class="hljs-keyword">\textwidth</span>]&#123;texlive-lion.pdf&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\qquad</span><br>    <span class="hljs-keyword">\parbox</span>[b]&#123;0.4<span class="hljs-keyword">\textwidth</span>&#125;&#123;这只狮子是由画师 Duane Bibby 专门为著名的<br>        <span class="hljs-keyword">\TeX</span>&#123;&#125; 发行版 <span class="hljs-keyword">\TeXLive</span>&#123;&#125; 绘制的作品。狮子是 <span class="hljs-keyword">\TeX</span>&#123;&#125; 系统的吉祥物，<br>        Duane Bibby 创作了大量有关 <span class="hljs-keyword">\TeX</span>&#123;&#125; 狮子的插图，如高德纳的 <span class="hljs-keyword">\textit</span>&#123;The<br>        <span class="hljs-keyword">\TeX</span>&#123;&#125;book&#125; 与 Lamport 的 <span class="hljs-keyword">\textit</span>&#123;<span class="hljs-keyword">\LaTeX</span>: A Document Preparation<br>        System&#125; 两书中的狮子插图，就是由 Duane Bibby 创作的。&#125;<br>    <span class="hljs-keyword">\caption</span>&#123;<span class="hljs-keyword">\TeX</span>&#123;&#125; 狮子&#125;<span class="hljs-keyword">\label</span>&#123;fig:texlivelion&#125;<br><span class="hljs-keyword">\end</span>&#123;figure&#125;<br><span class="hljs-comment">% 尤其需要注意图和盒子的对齐方式，图的基准点是左下角，盒子的基准点是中线左端</span><br><br><span class="hljs-comment">% minipage用法</span><br><span class="hljs-keyword">\begin</span>&#123;minipage&#125;[b]&#123;.5<span class="hljs-keyword">\textwidth</span>&#125;<br><span class="hljs-keyword">\centering</span><br><span class="hljs-keyword">\begin</span>&#123;tabular&#125;<br>...<br>    <span class="hljs-keyword">\end</span>&#123;tabular&#125;<br><span class="hljs-keyword">\end</span>&#123;minipage&#125;<br><br><span class="hljs-params">#</span> 插图并排，顶部对齐，看P352，比较复杂，总体思想是把插图放进一个盒子，然后使用盒子选项t，还需要在图上加一个高度为0的空行<span class="hljs-keyword">\vspace</span>&#123;0pt&#125;<br><br><span class="hljs-params">#</span> 总标题和子标题<br></code></pre></td></tr></table></figure><img src="/2024/11/30/LearnTex/image-20240410150635291.png" class="" title="image-20240410150635291"> <img src="/2024/11/30/LearnTex/image-20240410150927917.png" class="" title="image-20240410150927917"> <p><strong>5.3.4 浮动控制与float宏包</strong>：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-comment">% float 没有浮动效果的图表环境; H 不能与 htbp 混用</span><br><span class="hljs-comment">% \usepackage&#123;float&#125;</span><br><span class="hljs-keyword">\begin</span>&#123;figure&#125;[H]<br><span class="hljs-keyword">\centering</span><br><span class="hljs-keyword">\includegraphics</span>[height=1cm]&#123;lion.eps&#125;<br><span class="hljs-keyword">\caption</span>&#123;不浮动的图表&#125;<br><span class="hljs-keyword">\end</span>&#123;figure&#125;<br><br><span class="hljs-comment">% 定义新浮动环境</span><br><span class="hljs-comment">% \usepackage&#123;float&#125;</span><br><span class="hljs-keyword">\newfloat</span>&#123;flowchat&#125;&#123;htbp&#125;&#123;loflow&#125;[chapter] <span class="hljs-comment">% 新环境名,位置参数(htbp或H),产生该环境的目录需要的辅助文件扩展名,上级计数器(按章节编号)</span><br><span class="hljs-keyword">\floatname</span>&#123;flowchat&#125;&#123;流程图&#125; <span class="hljs-comment">% 定义新环境标题的标签名字</span><br><span class="hljs-comment">% 正文</span><br><span class="hljs-keyword">\begin</span>&#123;flowchart&#125;<br>    <span class="hljs-keyword">\centering</span><br>    <span class="hljs-keyword">\includegraphics</span>&#123;turing-reverse.pdf&#125;<br><span class="hljs-keyword">\caption</span>&#123;求逆字符串的图灵机&#125;<br><br><span class="hljs-comment">% newfloat宏包</span><br><span class="hljs-comment">% placeins宏包</span><br><span class="hljs-comment">% afterpage宏包</span><br></code></pre></td></tr></table></figure><img src="/2024/11/30/LearnTex/image-20240410191939003.png" class="" title="image-20240410191939003"> <p><strong>5.3.5 文字绕排</strong>：让文字沿图表绕排</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-comment">% picinpar 宏包</span><br><span class="hljs-comment">% wrapfig 宏包</span><br></code></pre></td></tr></table></figure><h3 id="5-4-使用彩色">5.4 使用彩色</h3><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-comment">% color 宏包</span><br><span class="hljs-comment">% xcolor 宏包</span><br><br><span class="hljs-comment">% colortbl 彩色表格</span><br></code></pre></td></tr></table></figure><h3 id="5-5-绘图语言">5.5 绘图语言</h3><p><strong>5.5.2 PSTricks与TikZ简介</strong>：</p><p><strong>5.5.3 METAPOST与Asymtote简介</strong>：</p><h1>lshort</h1><h2 id="1-基本概念">1 基本概念</h2><p><strong>1.1 概述</strong>：TeX最开始是1982年由高德纳（Donald E. Knuth）发布的排版引擎，LaTeX是使用TeX作为排版引擎的<strong>格式</strong>（最初的设计目的是内容与格式分离）。</p><blockquote><p>$\TeX$ 与汉字“泰赫”读音相似，$\LaTeX$ 与汉字“拉泰赫”读音相似。</p></blockquote><p><strong>1.2 简单的LaTeX源代码示例</strong>：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\documentclass</span>&#123;ctexart&#125;<br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br>``Hello world!&#x27;&#x27; from <span class="hljs-keyword">\LaTeX</span>. “你好，世界！”，来自 <span class="hljs-keyword">\LaTeX</span>&#123;&#125; 的问候。<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br><span class="hljs-comment">% 英文双引号是``&#x27;&#x27;,中文双引号直接输入</span><br></code></pre></td></tr></table></figure><img src="/2024/11/30/LearnTex/image-20240413130942108.png" class="" title="image-20240413130942108"> <blockquote><p>可以上网搜索，配置vscode完成LaTeX的编译。也可以使用命令行，<code>xelatex helloworld</code>。</p></blockquote><p><strong>1.3 LaTeX命令和代码结构</strong>：</p><ul><li><p>命令有两种，字母形式和非字母形式。字母形式命令会忽略其后所有连续空格，因此若想在字母形式命令后引入空格，需要在其后面加一对花括号阻止其忽略空格，如<code>\LaTex&#123;&#125; Users</code>。</p></li><li><p><strong>分组</strong>是与命令的作用域有关的概念，<strong>环境</strong>是一个特殊的分组。</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-comment">% 分组</span><br>&#123;<span class="hljs-keyword">\bfseries</span> 这是黑体中文，加粗英文，English&#125;<br><span class="hljs-comment">% 环境</span><br><span class="hljs-keyword">\begin</span>&#123;&lt;environment name&gt;&#125;[&lt;optional arguments&gt;]&#123;&lt;mandatory arguments&gt;&#125;<br>...<br><span class="hljs-keyword">\end</span>&#123;&lt;environment name&gt;&#125;<br></code></pre></td></tr></table></figure><img src="/2024/11/30/LearnTex/image-20240413132358178.png" class="" title="image-20240413132358178"> <p>注：<code>[]</code>里的是可选参数，<code>&#123;&#125;</code>里的是必选参数，这个常识在所有LaTeX命令和环境里都是通用的。参数有两种形式，<code>&lt;value&gt;</code>和<code>&lt;key&gt;=&lt;value&gt;</code>，前者示例<code>\documentclass[11pt,twoside,a4paper]&#123;article&#125;</code>，后者示例<code>\captionsetup&#123;font=it&#125;</code>。</p></li><li><p>源代码结构：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\documentclass</span>&#123;...&#125;  <span class="hljs-comment">% ... 为文档类</span><br><span class="hljs-comment">% 导言区</span><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-comment">% 正文区</span><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br><span class="hljs-comment">% 此后所有内容会被忽略</span><br></code></pre></td></tr></table></figure><p>导言区存放控制命令，包括调用宏包、全局设置；正文区存放具体内容，也会有少量临时的格式控制。</p></li></ul><p><strong>1.4 LaTeX 宏包和文档类</strong>：查看《lshort》P5。</p><blockquote><p>查看宏包文档，在终端里输入<code>texdoc &lt;pkg-name&gt;</code>。</p><p>棘手的问题，**某个命令到底是LaTeX自带的，还是哪个宏包提供的？**很遗憾，除了通过慢慢积累、熟悉较多宏包之外，没有其他很方便的方法。可以查看一些非官方资料，如LaTeX命令大全（<code>texdoc latex2e</code>）、LaTeX符号大全（<code>texdoc symbols-a4</code>）</p></blockquote><p><strong>1.5 LaTex工程文件结构</strong>：</p><p>模板的文件结构：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># 搜索宏包的路径 tlmgr search --global --file &lt;pkg-name&gt;.cls</span><br><span class="hljs-string">.tex</span><span class="hljs-comment"># * 源代码</span><br><span class="hljs-string">.sty</span><span class="hljs-comment"># 宏包文件,当然大部分宏包、文档类、文献格式文件是不用特别引入的</span><br><span class="hljs-string">.cls</span><span class="hljs-comment"># 文档类文件</span><br><span class="hljs-string">.bib</span><span class="hljs-comment"># * BIBTEX参考文献数据库</span><br><span class="hljs-string">.bst</span><span class="hljs-comment"># BIBTEX的参考文献格式模板</span><br><br><span class="hljs-comment"># 辅助文件和日志</span><br><span class="hljs-string">.log</span> <span class="hljs-string">排版引擎生成的日志文件，供排查错误使用。</span><br><span class="hljs-string">.aux</span> <span class="hljs-string">LATEX</span> <span class="hljs-string">生成的主辅助文件，记录交叉引用、目录、参考文献的引用等。</span><br><span class="hljs-string">.toc</span> <span class="hljs-string">LATEX</span> <span class="hljs-string">生成的目录记录文件。</span><br><span class="hljs-string">.lof</span> <span class="hljs-string">LATEX</span> <span class="hljs-string">生成的图片目录记录文件。</span><br><span class="hljs-string">.lot</span> <span class="hljs-string">LATEX</span> <span class="hljs-string">生成的表格目录记录文件。</span><br><span class="hljs-string">.bbl</span> <span class="hljs-string">BIBTEX</span> <span class="hljs-string">生成的参考文献记录文件。</span><br><span class="hljs-string">.blg</span> <span class="hljs-string">BIBTEX</span> <span class="hljs-string">生成的日志文件。</span><br><span class="hljs-string">.idx</span> <span class="hljs-string">LATEX</span> <span class="hljs-string">生成的供</span> <span class="hljs-string">makeindex</span> <span class="hljs-string">处理的索引记录文件。</span><br><span class="hljs-string">.ind</span> <span class="hljs-string">makeindex</span> <span class="hljs-string">处理</span> <span class="hljs-string">.idx</span> <span class="hljs-string">生成的用于排版的格式化索引文件。</span><br><span class="hljs-string">.ilg</span> <span class="hljs-string">makeindex</span> <span class="hljs-string">生成的日志文件。</span><br><span class="hljs-string">.out</span> <span class="hljs-string">hyperref</span> <span class="hljs-string">宏包生成的</span> <span class="hljs-string">PDF</span> <span class="hljs-string">书签记录文件。</span><br></code></pre></td></tr></table></figure><p><strong>1.6 文件的组织方式</strong>：单个源代码文件切割成若干个文件，<code>\input&#123;&lt;filename&gt;&#125;</code>，例如<code>\input&#123;chapters/file&#125;</code>，或<code>\include&#123;&lt;filename&gt;&#125;</code>。不过<code>\include</code>命令会在读入<code>&lt;filename&gt;</code>之前另起一页。</p><p>实际编写毕业设计等复杂源代码文件时，还会用到<code>\includeonly</code>和<code>syntonly</code>宏包。<code>\includeonly&#123;&lt;filename1,filename2,...&gt;&#125;</code>，正文不在其列表范围内的<code>\include</code>命令不会起效；<code>\syntaxonly</code>令LaTeX编译后不生成DVI或PDF文件，增快编译速度。</p><blockquote><p>经过实践证明，<code>\input</code>和<code>\include</code>不要一起混用，因为<code>\includeonly</code>不会影响<code>\input</code>，而且会造成一些意外的结果。</p><p><code>\syntaxonly</code>在我配置好的vscode里面也会有编译错误的结果，但是注释掉后其实是可以正常编译的。事实上这需要使用终端命令才会有效果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ xlatex chap1.tex<br>Runaway argument?<br>&#123;document ``Hello world!<span class="hljs-string">&#x27;&#x27;</span> from \LaTeX . “你好，我的世界！”\ETC.<br>! Paragraph ended before \begin  was complete.<br>&lt;to be <span class="hljs-built_in">read</span> again&gt; <br>                   \par <br>l.9 <br>   <br>? 这里可以输入相应的命令,下面的帮助文档<br>Type &lt;<span class="hljs-built_in">return</span>&gt; to proceed, S to scroll future error messages,<br>R to run without stopping, Q to run quietly,<br>I to insert something, E to edit your file,<br>1 or ... or 9 to ignore the next 1 to 9 tokens of input,<br>H <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>, X to quit.<br></code></pre></td></tr></table></figure></blockquote><h2 id="2-排版文字">2 排版文字</h2><p><strong>2.1 语言文字和编码</strong>：传统方式，使用 latex 或 pdflatex 编译命令时，对源代码的编码处理由 <code>inputenc</code> 宏包支持。比如将源代码保存为 Latin-1 编码，并在导言区调用 inputenc 宏包并指定 latin1 选项后，<code>Möbius</code>这样的词语就可以直接通过（用适当输入法）输入 <code>Möbius</code> 得到了。用于汉字的 GBK 等多字节编码也是同理。</p><p>然而现代的 XeTeX 原生支持 UTF-8 编码（多国子集编码），将源代码保存为 UTF-8 编码，并借助 <code>fontspec</code> 宏包调用适当的字体，原则上就可以在源代码中输入任意语言的文字。</p><p><strong>2.2 排版中文</strong>：<code>ctex</code>宏包无敌！通常<strong>不需要</strong>在中英文间加额外的空格，但是为了代码的可读性，加上汉字与 English 间的空格也无妨，实际上产生的 pdf 文件是没有差异的。</p><p><strong>2.3 LaTeX 中的字符</strong>：空格与分段，注释，特殊字符，连字，标点符号，拉丁文扩展与重音，其他符号，LaTeX 标志</p><p><strong>2.4 断行与断页</strong>：单词间距（<code>~</code>，这是不会断行的空格，称为带子），手动断行和断页，断词。</p><blockquote><p>断词：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">I think this is: su<span class="hljs-keyword">\-</span>per<span class="hljs-keyword">\-</span>cal<span class="hljs-keyword">\-</span><span class="hljs-comment">%</span><br>i<span class="hljs-keyword">\-</span>frag<span class="hljs-keyword">\-</span>i<span class="hljs-keyword">\-</span>lis<span class="hljs-keyword">\-</span>tic<span class="hljs-keyword">\-</span>ex<span class="hljs-keyword">\-</span>pi<span class="hljs-keyword">\-</span><span class="hljs-comment">%</span><br>al<span class="hljs-keyword">\-</span>i<span class="hljs-keyword">\-</span>do<span class="hljs-keyword">\-</span>cious.<br></code></pre></td></tr></table></figure><img src="/2024/11/30/LearnTex/image-20240413152720319.png" class="" title="image-20240413152720319"> </blockquote><h2 id="3-文档元素">3 文档元素</h2><p><strong>3.1 章节和目录</strong>：<code>\section[&lt;short title&gt;]&#123;&lt;title&gt;&#125;</code>，<code>\tableofcontents</code></p><p><strong>3.2 标题页</strong>：<code>\maketitle</code></p><p><strong>3.3 交叉引用</strong>：<code>\label&#123;fig:***&#125;</code>，<code>\ref&#123;eq:***&#125;</code>，<code>pageref&#123;tbl:***&#125;</code></p><p><strong>3.4 脚注和边注</strong>：<code>\footnote&#123;&#125;</code>，<code>\marginpar[]&#123;&#125;</code></p><p><strong>3.5 特殊环境</strong>：<strong>列表</strong>，<code>enumerate</code>、<code>itemize</code>，都使用<code>\item</code>标明每个列表项；<strong>对齐</strong>，<code>center</code>、<code>flushleft</code>、<code>flushright</code>（居中、左对齐、右对齐）；引用，<code>quote</code>、<code>quotation</code>；<strong>摘要</strong>，<code>abstract</code>；代码，<code>verbatim</code>。</p><blockquote><p><code>description</code>列表环境</p></blockquote><p><strong>3.6 表格</strong>：<code>tabular</code>环境，</p><p><strong>3.7 图片</strong>：<code>graphicx</code>宏包，<code>\includegraphics[]&#123;&#125;</code>，<code>\graphicspath</code></p><p><strong>3.8 盒子</strong>：水平盒子，<code>\mbox&#123;&#125;</code>，<code>\makebox[][]&#123;&#125;</code>；垂直盒子，<code>\parbox[][][]&#123;&#125;&#123;&#125;</code>，<code>minipage</code>环境。</p><blockquote><p>带框的水平盒子，标尺盒子</p></blockquote><p><strong>3.9 浮动体</strong>：<code>table</code>，<code>figure</code>，浮动体环境。</p><blockquote><p>浮动体的标题，并排和子图表，</p></blockquote><h2 id="4-排版数学公式">4 排版数学公式</h2><p><strong>4.1 AMS宏集</strong>：<code>AMS宏集</code>，是美国数学学会 (American Mathematical Society) 提供的对 LATEX 原生的数学公式排版的扩展，其核心是 <strong>amsmath</strong> 宏包，对多行公式的排版提供了有力的支持。此外，amsfonts 宏包以及基于它的amssymb 宏包提供了丰富的数学符号；amsthm 宏包扩展了 LATEX 定理证明格式。</p><p><strong>4.2 公式排版基础</strong>：</p><p><strong>4.3 数学符号</strong>：</p><p><strong>4.4 多行公式</strong>：<code>\multiline</code>环境（长公式换行），<code>align</code>环境（多行公式，按等号对齐），<code>gather</code>环境（多行公式，不需要按等号对齐）</p><blockquote><p>多行公式共用一个编号，<code>aligned</code>、<code>gathered</code>环境，</p></blockquote><p><strong>4.5 数组和矩阵</strong>：</p><p><strong>4.6 公式中的间距</strong>：</p><p><strong>4.7 数学符号的字体控制</strong>：</p><p><strong>4.8 定理环境</strong>：</p><p><strong>4.9 符号表</strong>：</p><h2 id="5-排版样式设定">5 排版样式设定</h2><h1>坑</h1><h2 id="Font-“Fandol-Regular”-does-not-contain-requested">Font “Fandol**-Regular” does not contain requested</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">Font &quot;Fandol**-Regular&quot; does not contain requested (fontspec) Script &quot;CJK&quot;.<br></code></pre></td></tr></table></figure><p><a href="https://zhuanlan.zhihu.com/p/483308417">https://zhuanlan.zhihu.com/p/483308417</a> TexLive 2021 打包为 iso 文件时出现问题，该问题导致 tex 无法识别 windows 操作系统，而 ctex 在调用中文字体集时会根据操作系统自动配置字体集，对于无法识别的操作系统，默认按 Linux 系统处理，Linux 系统中文字体集设定为 Fandol 系列，由于 Fandol 字体的不完善导致出现该警告。</p><p>（1）将文档类型这样写：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>[fontset=windows]&#123;ctexart&#125;<br></code></pre></td></tr></table></figure><p>（2）更新宏包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> /usr/local/texlive/2023/bin/x86_64-linux/tlmgr update --list<br><span class="hljs-built_in">sudo</span> /usr/local/texlive/2023/bin/x86_64-linux/tlmgr update --self --all<br></code></pre></td></tr></table></figure><p>（3）写成这样，可行，但是这几句命令缺一不可</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>[]&#123;article&#125; <span class="hljs-comment">% 改成ctexart,又会报warning</span><br><span class="hljs-keyword">\PassOptionsToPackage</span>&#123;quiet&#125;&#123;fontspec&#125; <span class="hljs-comment">% 禁止包在加载时输出警告或信息</span><br><span class="hljs-keyword">\usepackage</span>[UTF8]&#123;ctex&#125; <span class="hljs-comment">% 指定编码为UTF-8，以支持中文字符的输入和显示</span><br></code></pre></td></tr></table></figure><p>事实证明，还是会有问题，所以还是方法一合适。</p><h2 id="Underfull-hbox-badness-10000">Underfull \hbox (badness 10000)</h2><p><a href="https://blog.csdn.net/qq_39560620/article/details/105373426">解决办法</a>：需要换行的时候，（1）使用<code>\newline</code>，实测还是会有这个warning。（2）使用<code>\bigskip</code>、<code>\medskip</code>、<code>\smallskip</code>和<code>\vspace&#123;&lt;len&gt;&#125;</code>(len为自定义高度)，实测这个warning消失了，但是下一行与上一行的高度距离比<code>\newline</code>要大。</p><p>但是事实上，这个warning对实际编辑没有影响，大可不必理会。</p><h2 id="Size-substitutions-with-differences">Size substitutions with differences</h2><p>警告如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Size substitutions with differences<br>(Font) up to 0.41063pt have occurred.<br></code></pre></td></tr></table></figure><p>解决方案：（1）添加宏包，<code>\usepackage&#123;lmodern&#125;</code> （2）或者<a href="https://blog.csdn.net/Stars_King_/article/details/132920519">建议首先加载 <code>amsmath</code> 宏包</a></p><blockquote><p>lmodern 宏包提供了一个 Latin Modern 字体系列，包括罗马字体、无衬线字体和打字机字体，可以替换默认的 Computer Modern 字体。</p><p>——刘海洋《LaTex入门》, 51, “LATEX 默认的 Computer Modern 在一个字体中只覆盖很小的字符集， XƎLATEX 下默认的 Latin Modern 字体要好得多，一般都支持到拉丁字母（这通常就足够了），但希腊、西里尔等字母需要更换其他字体。”</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>论文写作</category>
      
      <category>Latex_Hitszthesis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Latex</tag>
      
      <tag>论文写作</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>archlinux进阶配置</title>
    <link href="/2024/11/29/arch-config/"/>
    <url>/2024/11/29/arch-config/</url>
    
    <content type="html"><![CDATA[<h1>archlinux 系统配置</h1><h2 id="终端">终端</h2><h3 id="zsh美化">zsh美化</h3><p>安装 ttf-meslo-nerd-font-powerlevel10k 字体：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S ttf-meslo-nerd-font-powerlevel10k  <span class="hljs-comment"># 我试过好像不用</span><br></code></pre></td></tr></table></figure><p>安装 powerlevel10k：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> --depth=1 https://gitee.com/romkatv/powerlevel10k.git ~/.config/powerlevel10k<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;source ~/.config/powerlevel10k/powerlevel10k.zsh-theme&#x27;</span> &gt;&gt;~/.zshrc<br><span class="hljs-comment"># 配置主题</span><br>p10k configure<br></code></pre></td></tr></table></figure><blockquote><p>教程：<a href="https://github.com/romkatv/powerlevel10k">romkatv/powerlevel10k: A Zsh theme</a></p></blockquote><br><h2 id="字体">字体</h2><p>Fontconfig配置（~/.config/fontconfig/fonts.conf）：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">fontconfig</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;fonts.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">fontconfig</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 显示器使用的像素排列方式. 现代显示器基本都是用rgb排列. --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;rgba&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">const</span>&gt;</span>rgb<span class="hljs-tag">&lt;/<span class="hljs-name">const</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 字体微调的程度, 可选为 hintnone, hintslight (默认), hintmedium, hintfull. --&gt;</span><br>  <span class="hljs-comment">&lt;!-- 简单来说，更高的 hinting 等级可以使字体更锐利，但同时也会损失更多的细节. --&gt;</span><br>  <span class="hljs-comment">&lt;!-- 如果你的显示器的 DPI 高得不像话 (&gt;=300), 那么就可以关闭 hinting, 因为字体会自然对齐像素. --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hintstyle&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">const</span>&gt;</span>hintslight<span class="hljs-tag">&lt;/<span class="hljs-name">const</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 抗锯齿. 除非你的屏幕DPI奇高否则建议开启. --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;font&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;antialias&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">bool</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- 关于lcdfilter, 因为我们在使用 FreeType2 自带的 Harmony 子像素渲染, 应该是不需要设置的. --&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 全局默认中文字体 --&gt;</span><br>  <span class="hljs-comment">&lt;!-- Default font for the zh_CN locale (no fc-match pattern) --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">compare</span>=<span class="hljs-string">&quot;contains&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lang&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>zh_CN<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;prepend&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 更改下一行即可, 以下同理 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- Fallback fonts preference order --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>sans-serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Sans CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">alias</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">prefer</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif CJK SC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif CJK TC<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif CJK JP<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Serif CJK KR<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Noto Color Emoji<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">prefer</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">alias</span>&gt;</span><br><br><br>  <span class="hljs-comment">&lt;!-- 将 Liberation 系列对应到我们定义的优先字体上 --&gt;</span><br>  <span class="hljs-comment">&lt;!-- Map fonts that are commonly used by web pages to our preferred fonts --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Liberation Sans<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>sans-serif<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;pattern&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">test</span> <span class="hljs-attr">qual</span>=<span class="hljs-string">&quot;any&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Liberation Mono<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">edit</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;assign&quot;</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">&quot;same&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>monospace<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">edit</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">match</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">selectfont</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rejectfont</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">patelt</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;family&quot;</span> &gt;</span><br>          <span class="hljs-comment">&lt;!-- This font is causing problem with GitHub --&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>Nimbus Sans<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">patelt</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">rejectfont</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">selectfont</span>&gt;</span><br>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">fontconfig</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>教程：<a href="https://szclsya.me/zh-cn/posts/fonts/linux-config-guide/">Linux 下的字体调校指南 - Leo’s Field</a></p></blockquote><br><h2 id="常用应用">常用应用</h2><h3 id="微信">微信</h3><p>现在的微信4.0很好用了，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S wechat-universal-bwrap<br></code></pre></td></tr></table></figure><p>配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">wechat-universal --<span class="hljs-built_in">help</span><br><br><span class="hljs-comment"># 修改 ~/.config/wechat-universal/binds.list, 增加如下内容</span><br>/run/media/joelee<br>/home/joelee<br></code></pre></td></tr></table></figure><br><h3 id="qq">qq</h3><p>qq现在统一架构，linux下用得舒舒服服，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S linuxqq<br></code></pre></td></tr></table></figure><br><h3 id="vscode">vscode</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S visual-studio-code-bin<br></code></pre></td></tr></table></figure><br><h3 id="todesk">todesk</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S todesk-bin<br></code></pre></td></tr></table></figure><br><h3 id="nutstore">nutstore</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S nutstore<br></code></pre></td></tr></table></figure><p>首次打开软件，global sync path虽然给了更改选项，但实际上也改不了；但是可以先取消每个要sync的文件夹的目录，不然nutstore会默认同步在 ~/Nutstore Files 。</p><p>为了防止 thunar 展示难看的 Nutstore Files 文件夹，可以在 ~/.hidden 下添加文件夹的名字，这样打开thunar 就不会看见该文件夹了。</p><br><h3 id="zotero-jdk-pdftk">zotero (jdk, pdftk)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># jdk23 pdftk 茉莉花插件</span><br>paru -S jdk-openjdk pdftk  <span class="hljs-comment"># 496.67MB</span><br><span class="hljs-comment"># zotero</span><br>paru -S zotero-bin<br></code></pre></td></tr></table></figure><br><h3 id="wps">wps</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S wps-office-cn wps-office-mui-zh-cn<br></code></pre></td></tr></table></figure><p>首次打开提示：</p><ul><li>system dpi is asymmetric, WPS Office may have display issues. 据说是因为WPS字体的问题，安装 win 的字体后就好了。。。但我不太理解。</li><li>缺失公式符号字体，例如 Symbol, Wingdings, Wingdings2, Wingdings3, Webdings, MT Extra</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 新罗马</span><br>paru -S ttf-times-new-roman<br><br><span class="hljs-comment"># 字体文件 https://www.alipan.com/s/iwAqcvcU7vr 提取码: mwB2</span><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> -r custom /usr/share/fonts <br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chmod</span> 644 /usr/share/fonts/custom/*<br><span class="hljs-built_in">sudo</span> fc-cache -fsv<br><br><span class="hljs-comment"># 中文界面,删除其他语言的,就会应用中文了</span><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">rm</span> -rf /usr/lib/office6/mui/&#123;en_US,mn_CN,ru_RU,ug_CN&#125;<br></code></pre></td></tr></table></figure><br><h3 id="nodejs-nvm">nodejs (nvm)</h3><p>使用nvm管理node环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S nvm<br><br><span class="hljs-comment"># 换源</span><br>vim ~/.zshrc<br><span class="hljs-built_in">export</span> NVM_NODEJS_ORG_MIRROR=<span class="hljs-string">&quot;https://npmmirror.com/mirrors/node&quot;</span><br><span class="hljs-built_in">export</span> NVM_IOJS_ORG_MIRROR=<span class="hljs-string">&quot;https://npmmirror.com/mirrors/npm&quot;</span><br><span class="hljs-built_in">source</span> /usr/share/nvm/init-nvm.sh<br><br><br><span class="hljs-comment"># install node.js </span><br>nvm install --lts<br>nvm install node<br><span class="hljs-comment"># activate </span><br>nvm use v22.11.0<br><br><span class="hljs-comment"># 其他命令</span><br>nvm -v<br>nvm ls-remote<br>nvm uninstall nodejs版本号  <span class="hljs-comment"># 在此之前 nvm deactivate</span><br>nvm <span class="hljs-built_in">ls</span><br>nvm use node <span class="hljs-comment"># 切换到最新版</span><br></code></pre></td></tr></table></figure><br><h3 id="pandoc">pandoc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S pandoc-bin<br></code></pre></td></tr></table></figure><br><h3 id="typora">typora</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S typora<br></code></pre></td></tr></table></figure><br><h3 id="miniforge">miniforge</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S miniforge<br>mamba init zsh<br>conda config --<span class="hljs-built_in">set</span> auto_activate_base <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><br><h3 id="rdp服务器">rdp服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S xrdp  <span class="hljs-comment"># 前端</span><br>paru -S xorgxrdp-glamor  <span class="hljs-comment"># 后端</span><br>paru -S  pipewire-module-xrdp  <span class="hljs-comment"># 声音</span><br><br><span class="hljs-built_in">sudo</span> vim /etc/X11/Xwrapper.config  <br><span class="hljs-comment"># 写入</span><br>allowed_users=anybody<br>needs_root_rights=no<br><br><br>paru -S xorg-xinit<br><span class="hljs-built_in">cp</span> /etc/X11/xinit/xinitrc ~/.xinitrc<br>vim ~/.xinitrc<br><span class="hljs-comment"># 注释后5行语句，然后写入</span><br><span class="hljs-built_in">export</span> DESKTOP_SESSION=plasma<br><span class="hljs-built_in">exec</span> startplasma-x11  <span class="hljs-comment"># 加上exec后xorg桌面会话结束后退出当前用户</span><br><br><br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> xrdp.service<br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> xrdp-sesman.service<br><br><span class="hljs-comment"># 用 remmina 做localhost的rdp连接</span><br><span class="hljs-comment"># 但是没成功。。。</span><br></code></pre></td></tr></table></figure><blockquote><p>教程：<a href="https://dalsidealland.com/2024/07/30/debug/arch%20Linux%20%E5%AE%89%E8%A3%85%20RDP%20%E7%BB%88%E6%9E%81%E6%95%99%E7%A8%8B/">https://dalsidealland.com/2024/07/30/debug/arch Linux 安装 RDP 终极教程/</a></p></blockquote><p>thinclient_drivers文件夹问题：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim /etc/xrdp/sesman.ini<br><span class="hljs-comment"># 修改为 FuseMountName=/home/joelee/.xrdp/thinclient_drives</span><br><span class="hljs-built_in">mkdir</span> -p ~/.xrdp/thinclient_drives<br><span class="hljs-built_in">sudo</span> systemctl restart xrdp xrdp-sesman<br></code></pre></td></tr></table></figure><br><h3 id="rdp客户端">rdp客户端</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S  remmina  freerdp<br></code></pre></td></tr></table></figure><br><h3 id="sddm自动登录">sddm自动登录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$USER</span>  <span class="hljs-comment"># joelee</span><br><span class="hljs-built_in">ls</span> -l /usr/share/xsessions/  <span class="hljs-comment"># plasmax11.desktop</span><br><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /etc/sddm.conf.d/<br><span class="hljs-built_in">sudo</span> vim /etc/sddm.conf.d/autologin.conf<br><span class="hljs-comment"># 写入</span><br>[Autologin]<br>User=joelee<br>Session=plasmax11<br></code></pre></td></tr></table></figure><br><h3 id="openssh">openssh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S openssh<br><span class="hljs-comment"># sshd.service</span><br></code></pre></td></tr></table></figure><br><h3 id="masterpdf">masterpdf</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S masterpdfeditor-free<br></code></pre></td></tr></table></figure><br><h3 id="wemeet">wemeet</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S wemeet-bin<br></code></pre></td></tr></table></figure><br><h3 id="blueman-蓝牙设置增强">blueman (蓝牙设置增强)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S blueman<br></code></pre></td></tr></table></figure><br><h3 id="qbittorrent-enhanced-peerbanhelper">qbittorrent-enhanced (peerbanhelper)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S qbittorrent-enhanced<br><span class="hljs-comment"># qbee 开启WebUI, 根据后面给出的链接</span><br><br><br><span class="hljs-comment"># peerbanhelper</span><br>paru -S p7zip<br><span class="hljs-built_in">mkdir</span> -p ~/.local/share/pbh<br><span class="hljs-built_in">cd</span> ~/Downloads<br>wget https://github.com/PBH-BTN/PeerBanHelper/releases/download/v7.1.5/PeerBanHelper_7.1.5.zip<br><br><span class="hljs-built_in">cd</span> ~/.local/share/pbh<br><span class="hljs-comment"># https://github.com/PBH-BTN/PeerBanHelper/discussions/475 </span><br><span class="hljs-comment"># 复制管理脚本到 pbh_manager.sh</span><br><span class="hljs-comment"># 复制服务文件到 pbh.service</span><br><span class="hljs-comment"># 复制测试脚本到 test-start.sh</span><br>pbh_manager.sh  <span class="hljs-comment"># 进行文件的复制和服务的建立</span><br>./test-start.sh<br><span class="hljs-comment"># 打开 http://localhost:9898</span><br><span class="hljs-comment"># 设置一个token,比如 aa-bb-cc-dd-ee-ff</span><br><span class="hljs-comment"># 添加下载器 类型：“qbee”，地址：“之前qbee的WebUI的地址”</span><br><span class="hljs-comment">#                      用户名和密码是“之前qbee的WebUI的用户名和地址”</span><br><span class="hljs-comment">#                      其他默认</span><br><br><br><span class="hljs-comment"># .zshrc</span><br><span class="hljs-built_in">alias</span> peerbanhelper=<span class="hljs-string">&quot;cd ~/.local/share/pbh &amp;&amp; ./test-start.sh&quot;</span><br></code></pre></td></tr></table></figure><p><a href="https://pbh-btn.github.io/pbh-docs/docs/downloader/qBittorrent">qBittorrent | PeerBanHelper</a></p><p><a href="https://trackerslist.com/#/">XIU2/TrackersListCollection</a></p><p><a href="pbh_manager_sh.txt">pbh_manager.sh</a></p><p><a href="pbh_service.txt">pbh.service</a></p><p><a href="test-start_sh.txt">test-start.sh</a></p><br><h3 id="xbyyunpan-ffmpeg-aria2">xbyyunpan (ffmpeg,aria2)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S electron21-bin<br>paru -S xbyyunpan-bin  <span class="hljs-comment"># 等待时间很长</span><br><br>paru -S ffmpeg<br><br><span class="hljs-comment"># 解决“Aira2已断开”问题</span><br>paru -S aria2<br><span class="hljs-built_in">cd</span> /usr/lib/xbyyunpan/engine/<br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mv</span> aria2c aria2c_bak<br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">ln</span> -s /usr/bin/aria2c<br></code></pre></td></tr></table></figure><bt><h3 id="HP打印机">HP打印机</h3><p>HP linux 开源驱动对办公室里的打印机的支持如下，</p><img src="/2024/11/29/arch-config/image-20241130012823193.png" class="" title="image-20241130012823193"><p>按照 ArchWiki 的 <a href="https://wiki.archlinux.org/title/CUPS">CUPS 页面</a>进行相关配置，CUPS 是苹果公司开源的打印系统，是目前 Linux 下最主流的打印方案。 <strong>安装 CUPS</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S cups cups-pdf<br><br><span class="hljs-comment"># 法1 利用 cups 的Web界面管理</span><br>systemctl <span class="hljs-built_in">enable</span> cups.service --now  <span class="hljs-comment"># http://localhost:631</span><br><span class="hljs-comment"># 法2 利用 KDE 桌面的软件包</span><br>paru -S print-manager system-config-printer<br>systemctl <span class="hljs-built_in">enable</span> cups.socket<br></code></pre></td></tr></table></figure><p><strong>安装驱动</strong>：OpenPrinting 维护的 <strong>foomatic</strong> 为很大一部分打印机提供的驱动文件，Gutenprint 维护的 gutenprint 包也包含了佳能(Canon)、爱普生(Epson)、利盟(Lexmark)、索尼(Sony)、奥林巴斯(Olympus) 以及 PCL 打印机的驱动程序。具体的安装方法同样可以在 ArchWiki 的 <a href="https://wiki.archlinux.org/title/CUPS">CUPS 页面</a>找到。</p><blockquote><p>观察别人寻找驱动的过程：但 HP Laser 103w 的驱动程序都不在这些软件包中，在 HP 的官网我们可以找到<a href="https://support.hp.com/cn-zh/drivers/hp-laser-100-printer-series/model/2100769190">这个页面</a>，包含了 HP Laser 103w 的 Linux 驱动<a href="https://ftp.hp.com/pub/softlib/software13/printers/CLP150/uld-hp_V1.00.39.12_00.15.tar.gz">下载地址</a>（已在 <a href="http://web.archive.org">web.archive.org</a> 存档）。通过下载下来的文件名，我们可以看见名字为 uld-hp，理论上可以直接通过压缩包内的安装脚本进行安装，但我通过这个名字顺藤摸瓜，找到了 <a href="https://aur.archlinux.org/packages/hpuld">AUR/hpuld</a> 可以直接进行安装。</p></blockquote><p>我在 <a href="https://developers.hp.com/hp-linux-imaging-and-printing">HPLIP</a> 官方网址上找到办公室的打印机型号，得知 HPLIP 是支持其的，因此，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S hplip<br><br>Optional dependencies <span class="hljs-keyword">for</span> hplip<br>    cups: <span class="hljs-keyword">for</span> printing support [installed]<br>    sane: <span class="hljs-keyword">for</span> scanner support [installed]<br>    python-pillow: <span class="hljs-keyword">for</span> commandline scanning support<br>    python-reportlab: <span class="hljs-keyword">for</span> pdf output <span class="hljs-keyword">in</span> hp-scan<br>    rpcbind: <span class="hljs-keyword">for</span> network support<br>    python-pyqt5: <span class="hljs-keyword">for</span> running GUI and hp-toolbox<br>    libusb: <span class="hljs-keyword">for</span> advanced usb support [installed]<br>    wget: <span class="hljs-keyword">for</span> network support [installed]<br></code></pre></td></tr></table></figure><p>各种类型：</p><ol><li><strong>Manual Config（手动配置）</strong>：用户需要手动输入打印机的详细信息，如IP地址、端口号等，来配置打印机连接。</li><li><strong>IPP (ipp)</strong>：IPP（Internet Printing Protocol，互联网打印协议）是一种网络打印协议，允许用户通过网络连接打印机。ipp选项通常用于通过HTTP协议进行网络打印。</li><li><strong>IPP (https)</strong>：与IPP类似，但使用HTTPS协议，提供更安全的网络打印服务。</li><li><strong>IPP (ipps)</strong>：这是IPP协议的扩展，使用SSL/TLS加密，提供更安全的网络打印服务。</li><li><strong>AppSocket/HP JetDirect</strong>：AppSocket是一种由HP开发的打印机协议，主要用于HP打印机。HP JetDirect是HP的一种网络打印解决方案，允许打印机直接连接到网络。</li><li><strong>LPD/LPR Host or Printer</strong>：LPD（Line Printer Daemon，行式打印机守护进程）和LPR（Line Printer Requester，行式打印机请求器）是Unix/Linux系统中常用的网络打印协议。LPD用于管理打印队列，LPR用于发送打印请求。</li><li><strong>Windows Printer via SAMBA</strong>：通过Samba服务连接Windows打印机。Samba是一种允许Unix/Linux系统与Windows系统共享文件和打印机的软件。</li></ol><blockquote><p>参考链接：<a href="https://zhul.in/2024/07/14/config-hp-laser-103w-printer-for-archlinux/">HP Laser 103w 打印机</a>  <a href="https://zhul.in/2024/07/14/config-hp-laser-103w-printer-for-archlinux/">HP linux 驱动支持列表</a>  <a href="https://support.hp.com/us-en/product/details/hp-color-laserjet-pro-m280-m281-multifunction-printer-series/model/14142491">HP M281 fdw</a></p></blockquote><br><h3 id="贴图-slop-miam-viewnior">贴图 (slop,miam,viewnior)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S xdotool miam viewnior<br>paru -S gnome-themes-extra  <span class="hljs-comment"># 解决 viewnior 无法加载 adwaita 主题引擎</span><br>paru -S lxappearance  <span class="hljs-comment"># 调整 gtk 应用的主题等元素</span><br>paru -S materia-gtk-theme gtk-engine-murrine arc-gtk-theme arc-icon-theme <br></code></pre></td></tr></table></figure><p>贴图脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># 位于 ~/.local/share/pinpic/pinpic.sh</span><br><br>rect=$(slop -f <span class="hljs-string">&quot;%x %y %w %h&quot;</span>)<br><br>tmp_file=$(<span class="hljs-built_in">echo</span> /tmp/$(<span class="hljs-built_in">date</span> +<span class="hljs-string">&quot;%Y_%m_%d_%H_%M_%S&quot;</span>).png)<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$tmp_file</span><br><br>pos_x=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$rect</span> | awk <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span>)<br>pos_y=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$rect</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span>)<br>width=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$rect</span> | awk <span class="hljs-string">&#x27;&#123;print $3&#125;&#x27;</span>)<br>height=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$rect</span> | awk <span class="hljs-string">&#x27;&#123;print $4&#125;&#x27;</span>)<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$pos_x</span> <span class="hljs-variable">$pos_y</span> <span class="hljs-variable">$width</span> <span class="hljs-variable">$height</span><br><br>maim -g <span class="hljs-variable">$&#123;width&#125;</span>x<span class="hljs-variable">$&#123;height&#125;</span>+<span class="hljs-variable">$&#123;pos_x&#125;</span>+<span class="hljs-variable">$&#123;pos_y&#125;</span> <span class="hljs-variable">$tmp_file</span><br>gtk-launch viewnior <span class="hljs-variable">$tmp_file</span> --class=Viewnior &amp;&amp; <span class="hljs-built_in">sleep</span> 1 &amp;&amp; xdotool search --onlyvisible --classname <span class="hljs-string">&quot;Viewnior&quot;</span> windowsize <span class="hljs-variable">$width</span> <span class="hljs-variable">$height</span> windowmove <span class="hljs-variable">$pos_x</span> <span class="hljs-variable">$pos_y</span><br></code></pre></td></tr></table></figure><p>移动贴图：Meta + 左键</p><p>改变贴图大小：Meta + 右键拖动</p><p>关闭贴图窗口：ctrl + w</p><br><h3 id="磁盘分区">磁盘分区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S gparted<br></code></pre></td></tr></table></figure><br><h3 id="baidupcs-go">baidupcs-go</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -Qi baidupcs-go<br><span class="hljs-comment"># 用 bduss 登录, login -bduss=******</span><br><span class="hljs-comment"># bduss获取: 登录pan.baidu.com, 开发者工具 &gt; Application &gt; Cookie &gt; bduss</span><br></code></pre></td></tr></table></figure><br><h3 id="e-search-bin-flameshot-截图贴图">e-search-bin flameshot (截图贴图)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S e-search-bin  <span class="hljs-comment"># 体积比较大</span><br>paru -S flameshot <br></code></pre></td></tr></table></figure><br><h3 id="mlocate-搜索文件">mlocate (搜索文件)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S plocate<br></code></pre></td></tr></table></figure><br><h3 id="AB-Downloader">AB Downloader</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S jdk17-openjdk   <span class="hljs-comment"># 之前已经安装过 jdk-openjdk 的不用安装这个啦</span><br>archlinux-java <span class="hljs-built_in">set</span> java-17-openjdk<br>paru -S abdownloadmanager-bin<br></code></pre></td></tr></table></figure><p>edge的相关插件到 <a href="https://www.crxsoso.com/webstore/detail/bbobopahenonfdgjgaleledndnnfhooj">AB Download Manager Browser Integration</a> 下载</p><p>缺点：（1）不能自定义 user agent （2）没有官方的edge插件 （3）不能自动嗅探网页上的多媒体资源 （4）托盘区图标点击无响应</p><br><h3 id="xdman-beta-bin">xdman-beta-bin</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S xdman-beta-bin<br></code></pre></td></tr></table></figure><br><h3 id="cloudpan189-go-bin-天翼云盘-提示权限问题">cloudpan189-go-bin (天翼云盘,提示权限问题)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S cloudpan189-go-bin<br></code></pre></td></tr></table></figure><br><h3 id="lx-music-desktop-bin">lx-music-desktop-bin</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S lx-music-desktop-bin<br></code></pre></td></tr></table></figure><p>根据 <a href="https://github.com/lyswhut/lx-music-desktop/issues/1114">github上的一个issue</a> 说会有内存泄漏问题，但是我按照上面操作后并没有多大影响，感觉最新版应该解决了内存泄漏问题，操作如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 关闭软件(不关闭桌面歌词) </span><br>paru -S strace  <span class="hljs-comment"># 追查系统调用</span><br>strace lx-music-desktop<br><span class="hljs-comment"># 疯狂输出</span><br>writev(45, [&#123;iov_base=<span class="hljs-string">&quot;\f\0\5\0\17\0\300\10\3\0\0\0\306\5\0\0\364\2\0\0&quot;</span>, iov_len=20&#125;], 1) = 20<br>recvmsg(46, &#123;msg_namelen=0&#125;, 0)         = -1 EAGAIN (资源暂时不可用)<br>recvmsg(46, &#123;msg_namelen=0&#125;, 0)         = -1 EAGAIN (资源暂时不可用)<br>poll([&#123;fd=11, events=POLLIN&#125;, &#123;fd=45, events=POLLIN&#125;, &#123;fd=46, events=POLLIN&#125;], 3, 0) = 1 ([&#123;fd=45, revents=POLLIN&#125;])<br>poll([&#123;fd=45, events=POLLIN|POLLOUT&#125;], 1, -1^C) = 1 ([&#123;fd=45, revents=POLLIN|POLLOUT&#125;])<br><br><br>grep messagebus /etc/group<br><span class="hljs-built_in">sudo</span> groupadd messagebus<br><span class="hljs-built_in">sudo</span> usermod -a -G messagebus joelee<br><br><span class="hljs-comment"># 撤销</span><br><span class="hljs-built_in">sudo</span> gpasswd -d joelee messagebus<br><span class="hljs-built_in">sudo</span> groupdel messagebus<br></code></pre></td></tr></table></figure><br><h3 id="easyconnect"><a href="https://aur.archlinux.org/packages/easyconnect">easyconnect</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S easyconnect<br></code></pre></td></tr></table></figure><br><h3 id="tlp">tlp</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S tlp tlpui tlp-rdw<br><span class="hljs-comment"># tlpui: A GTK user interface for TLP written in Python</span><br><span class="hljs-comment"># tlp-rdw: 配置无线设备（如Wi-Fi、蓝牙等）的工具</span><br><br><br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> --now tlp.service<br><span class="hljs-comment"># /etc/tlp.conf</span><br>USB_AUTOSUSPEND=0<br>RUNTIME_PM_ON_AC=auto<br><br><br><span class="hljs-comment"># avoid conflicts and ensure proper operation of TLP&#x27;s radio device switching options</span><br><span class="hljs-comment"># 让 TLP 能够单独负责无线设备的节能管理</span><br><span class="hljs-built_in">sudo</span> systemctl mask systemd-rfkill.service<br><span class="hljs-built_in">sudo</span> systemctl mask systemd-rfkill.socket<br></code></pre></td></tr></table></figure><br><h3 id="Vega-Mobile系列集显">Vega Mobile系列集显</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S mesa xf86-video-amdgpu<br>paru -S vulkan-radeon<br></code></pre></td></tr></table></figure><h2 id="常见问题">常见问题</h2><h3 id="breeze主题锁屏后黑屏">breeze主题锁屏后黑屏</h3><p>更换主题，安装 breath 主题</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S breath-theme-git<br></code></pre></td></tr></table></figure><br>]]></content>
    
    
    <categories>
      
      <category>archlinux</category>
      
      <category>系统配置</category>
      
    </categories>
    
    
    <tags>
      
      <tag>archlinux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>双系统 win11 + arch</title>
    <link href="/2024/11/25/arch-win11-dualsystem/"/>
    <url>/2024/11/25/arch-win11-dualsystem/</url>
    
    <content type="html"><![CDATA[<h1>为什么选择archlinux</h1><p>我曾经用了将近一年的Ubuntu 22.04，她给我的感觉就是简单易用、适合新手，但是大版本迭代的问题导致只能使用较旧的软件包，比如Ubuntu 22.04的内核版本大概是6.5左右，而截至2024年8月，内核版本即将更新到6.11。因此我更渴望滚动更新的archlinux，给我带来最新的特性和应用，并且它的“用户论坛”（AUR）是最活跃的linux用户群，里面充斥着大量的第三方应用。尽管在没使用前，我曾被她的“极难驾驭”所难倒，但我尝试了4、5次安装后发现，她给我的自由度真的很高，上了几次后就熟练了。</p><br><h1>参考链接</h1><p><a href="https://arch.icekylin.online/">archlinux 简明指南</a></p><blockquote><p>UEFI+GPT+全新安装：采用三分区，<code>EFI系统分区（\boot）</code>、<code>交换分区（swap）</code>、<code>根分区（\）</code>。</p><p>建议双系统也这么分区，不要将arch的grub和win的系统分区混在一起，一块硬盘有多个EFI分区也是没有问题的。</p><p>如果在物理机上安装失败导致无法开机，还可以学习<code>winPE</code>（一种可以把自己装进内存的轻量win系统）来清楚所有分区，再重新安装，很简单的！</p></blockquote><br><h1>安装</h1><p>电脑情况：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell">OS: Windows <span class="hljs-number">11</span> (专业工作站版) x86_64<br>Host: T6AD (Standard)<br>Kernel: WIN32_NT <span class="hljs-number">10.0</span>.<span class="hljs-number">22631.4460</span> (<span class="hljs-number">23</span>H2)<br>Shell: Windows PowerShell <span class="hljs-number">5.1</span>.<span class="hljs-number">22621.4391</span><br>Terminal: Windows Terminal <span class="hljs-number">1.21</span>.<span class="hljs-number">3231.0</span><br>CPU: AMD Ryzen <span class="hljs-number">7</span> <span class="hljs-number">7435</span>HS (<span class="hljs-number">16</span>) <span class="hljs-selector-tag">@</span> <span class="hljs-number">4.55</span> GHz<br>GPU: NVIDIA GeForce RTX <span class="hljs-number">4060</span> Laptop GPU (<span class="hljs-number">7.77</span> GiB) [<span class="hljs-type">Discrete</span>]<br></code></pre></td></tr></table></figure><br><h2 id="准备">准备</h2><ul><li><p>vim的基本操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">:wq  <span class="hljs-comment"># w是写入文件，q是退出编辑</span><br>:q!  <span class="hljs-comment"># 不保存，强制退出</span><br>gg   <span class="hljs-comment"># 回到文首</span><br>G    <span class="hljs-comment"># 回到文末</span><br><span class="hljs-built_in">dd</span>   <span class="hljs-comment"># 剪切光标所在行</span><br>2dd  <span class="hljs-comment"># 剪切光标所在行和下一行</span><br>/xx  <span class="hljs-comment"># 搜索&quot;xx&quot;，n下一个，N上一个</span><br>?xx  <span class="hljs-comment"># 反向搜索</span><br></code></pre></td></tr></table></figure></li><li><p>手机开热点，BIOS的无线网卡硬件开关处于打开状态</p></li><li><p>在<a href="https://archlinux.org/download/">官网</a>下载archlinux的ISO映像，准备一个至少2G的U盘，将ISO文件烧录进U盘。另外，还需要用PGP signature签名文件检查ISO的完整性和无误性。自己搜索校验的方法。</p></li><li><p>最好提前准备winPE启动U盘，方便清除分区</p></li><li><p>有至少48G的空闲空间</p></li><li><p><a href="https://wiki.archlinux.org/title/System_time">设置window使用UTC时间</a></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 管理员</span><br>reg add <span class="hljs-string">&quot;HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation&quot;</span> /v RealTimeIsUniversal /d <span class="hljs-number">1</span> /t REG_DWORD /f<br></code></pre></td></tr></table></figure></li></ul><br><h2 id="进入arch安装环境">进入arch安装环境</h2><p>插入U盘，重启时狂按F2或F12，选择U盘启动，从而进入arch安装环境。</p><h2 id="安装arch">安装arch</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 禁用自动选择镜像源的服务，因为自动了后留下来的镜像源不一定正确</span><br>systemctl stop reflector.service<br>rmmod pcspkr <span class="hljs-comment">#禁止蜂鸣</span><br><br><br><span class="hljs-comment"># 2. 确认是UEFI模式</span><br><span class="hljs-built_in">ls</span> /sys/firmware/efi/efivars <br><br><br><span class="hljs-comment"># 3. 连接网络</span><br><span class="hljs-comment"># 连接无线wifi</span><br>iwctl  <span class="hljs-comment"># 进入交互式命令行</span><br>device list  <span class="hljs-comment"># 无线网卡wlan0</span><br>station wlan0 scan<br>station wlan0 get-networks<br>station wlan0 connect ****  <span class="hljs-comment"># 输入密码即可</span><br><span class="hljs-built_in">exit</span><br><br><span class="hljs-comment"># netplan连接有线网络</span><br>vim /etc/netplan/00-installer-config.yaml<br><span class="hljs-comment"># https://www.cnblogs.com/safe-rabbit/p/18312150</span><br>network:<br>  version: 2<br>  renderer: networkd<br>  wifis:<br>    wlp2s0b1:<br>      dhcp4: <span class="hljs-built_in">yes</span><br>      access-points:<br>        <span class="hljs-string">&quot;network_ssid_name&quot;</span>:<br>          password: <span class="hljs-string">&quot;**********&quot;</span><br><br><span class="hljs-comment"># 不能正确连接网络</span><br>ip <span class="hljs-built_in">link</span><br>ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> wlan0 up<br><span class="hljs-comment"># 报错 operation not possilble due to RF-kill，尝试解锁无线网卡</span><br>rfkill unblock wifi<br><br><br><span class="hljs-comment"># 4. 更新系统时钟</span><br>timedatectl set-ntp <span class="hljs-literal">true</span><br>timedatectl status<br><br><br><span class="hljs-comment"># 5. 分区</span><br>lsblk  <span class="hljs-comment"># 查看都有哪些磁盘，例如/dev/nvme0n1, /dev/sda</span><br>cfdisk /dev/nvme0n1  <span class="hljs-comment"># gpt, `EFI`:256M, `swap`: 4G, `剩下的`: linux filesystem, 注意退出交互界面前要先write再quit</span><br><br><br><span class="hljs-comment"># 6. 格式化分区</span><br>mkfs.vfat /dev/nvme0n1p1  <span class="hljs-comment"># .fat -F32 也可以</span><br>mkfs.btrfs -L myArch /dev/nvme0n1p3  <span class="hljs-comment"># -L 设置分区的label</span><br>mkswap /dev/nvme0n1p2<br><span class="hljs-comment"># 创建btrfs子卷</span><br>mount -t btrfs -o compress=zstd /dev/nvme0n1p3 /mnt  <span class="hljs-comment"># zstd 开启透明压缩</span><br>btrfs subvolume create /mnt/@<br>btrfs subvolume create /mnt/@home<br>btrfs subvolume list -p /mnt<br>umount /mnt<br><br><br><span class="hljs-comment"># 7. 挂载</span><br>mount -t btrfs -o subvol=/@,compress=zstd /dev/nvme0n1p3 /mnt<br><span class="hljs-built_in">mkdir</span> /mnt/home<br>mount -t btrfs -o subvol=/@home,compress=zstd /dev/nvme0n1p3 /mnt/home<br><span class="hljs-built_in">mkdir</span> /mnt/boot<br>mount /dev/nvme0n1p1 /mnt/boot<br>swapon /dev/nvme0n1p2<br>lsblk<br>free -h<br><br><br><span class="hljs-comment"># 8. 安装系统</span><br>pacstrap /mnt base base-devel linux linux-firmware btrfs-progs  <span class="hljs-comment"># base-devel是AUR安装包所必需，linux是内核软件包</span><br>pacstrap /mnt vim <span class="hljs-built_in">sudo</span> zsh zsh-completions networkmanager<br><br><br><span class="hljs-comment"># 9. 生成fstab</span><br>genfstab -U /mnt &gt; /mnt/etc/fstab<br><span class="hljs-built_in">cat</span> /mnt/etc/fstab<br></code></pre></td></tr></table></figure><h2 id="arch-chroot到新系统">arch-chroot到新系统</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs bash">arch-chroot /mnt<br><br><br><span class="hljs-comment"># 0 禁止蜂鸣</span><br>rmmod pcspkr<br>vim /etc/modprobe.d/blacklist.conf<br><span class="hljs-comment"># 添加 blacklist pcspkr</span><br><br><br><span class="hljs-comment"># 1. 设置主机名，hosts文件，时区</span><br>vim /etc/hostname  <span class="hljs-comment"># myarch</span><br>vim /etc/hosts<br><span class="hljs-comment"># 127.0.0.1 localhost</span><br><span class="hljs-comment"># ::1 localhost</span><br><span class="hljs-comment"># 127.0.1.1 myarch.localdomain myarch  # 也有说这句不需要</span><br><span class="hljs-built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime<br><br><br><span class="hljs-comment"># 2. 同步系统时间到硬件时间</span><br>hwclock --systohc<br><br><br><span class="hljs-comment"># 3. 设置软件使用的语言、书写习惯和字符集</span><br>vim /etc/locale.gen<br><span class="hljs-comment"># 取消&quot;en_US.UTF-8 UTF-8&quot;和&quot;zh_CN.UTF-8 UTF-8&quot;的注释</span><br>locale-gen<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;LANG=en_US.UTF-8&#x27;</span> &gt; /etc/locale.conf  <br><span class="hljs-comment"># 也有说要&quot;en_SG.UTF-8&quot;  # 也有说用`localectl set-locale LANG=en_US.UTF-8`</span><br><br><br><span class="hljs-comment"># 4. 设置root用户的密码</span><br>passwd root<br><br><br><span class="hljs-comment"># 5. 安装对应芯片制造商的微码</span><br><span class="hljs-comment"># pacman -S intel-ucode</span><br>pacman -S amd-ucode<br><br><br><span class="hljs-comment"># 6. 安装引导程序</span><br>pacman -S grub efibootmgr os-prober ntfs-3g<br><br>grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub  <br><span class="hljs-comment"># grub为自定义名字，也有说为ARCH</span><br><span class="hljs-comment"># 撤销grub-install,使用grub-uninstall /boot/grub</span><br><br>vim /etc/default/grub  <br><span class="hljs-comment"># 改成 GRUB_CMDLINE_LINUX_DEFAULT=&quot;loglevel=1 quiet&quot;</span><br><span class="hljs-comment"># 教程是 GRUB_CMDLINE_LINUX_DEFAULT=&quot;loglevel=5 nowatchdog&quot;,但我觉得没必要</span><br><span class="hljs-comment"># 取消GRUB_DISABLE_OS_PROBER=false的注释</span><br><br>grub-mkconfig -o /boot/grub/grub.cfg<br><span class="hljs-comment"># 撤销grub-mkconfig,使用 rm -rf /boot/grub/grub.cfg</span><br><span class="hljs-comment"># 检验撤销: grub-mkconfig </span><br><br><br><span class="hljs-comment"># 7. 完成安装</span><br><span class="hljs-built_in">exit</span><br>umount -R /mnt<br>reboot  <span class="hljs-comment"># 此时可以把U盘拔出来了</span><br><br><br><span class="hljs-comment"># 8. 进入新系统后，用root用户登录</span><br>systemctl <span class="hljs-built_in">enable</span> --now NetworkManager.service<br>ping www.baidu.com<br><span class="hljs-comment"># 无线连接: nmcli dev wifi list</span><br><span class="hljs-comment">#          nmcli dev wifi connect &quot;***&quot; password &quot;***&quot;</span><br>pacman -S fastfetch<br>fastfetch<br>poweroff <span class="hljs-comment"># 关机</span><br></code></pre></td></tr></table></figure><h2 id="桌面环境与应用">桌面环境与应用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 更新系统</span><br>pacman -Syu<br><br><br><span class="hljs-comment"># 2. 配置root的默认编辑器</span><br>vim ~/.bash_profile  <span class="hljs-comment"># export EDITOR=&#x27;vim&#x27;</span><br><br><br><span class="hljs-comment"># 3. 新建用户,之后重启用新用户登录</span><br>useradd -m -G wheel -s /bin/zsh joelee<br>passwd joelee<br>EDITOR=<span class="hljs-string">&#x27;vim&#x27;</span> visudo  <span class="hljs-comment"># 取消%wheel ALL=(ALL:ALL) ALL的注释</span><br><br><br><span class="hljs-comment"># 4. 开启32位支持和archlinuxcn</span><br>vim /etc/pacman.conf<br><span class="hljs-comment"># 取消[multilib]一节中两行的注释</span><br><span class="hljs-comment"># 添加[archlinuxcn]：</span><br><span class="hljs-comment"># [archlinuxcn]</span><br><span class="hljs-comment"># Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch</span><br>pacman -Syyu  <span class="hljs-comment"># 强制刷新数据库</span><br><br><span class="hljs-comment"># 提示GPG证书错误</span><br>pacman -S archlinux-keyring<br><br><br><span class="hljs-comment"># 5. 安装KDE-plasma</span><br>pacman -S plasma-meta kitty thunar<br><span class="hljs-comment"># 选择noto-fonts, ffmpeg, vlc</span><br><br><br><span class="hljs-comment"># 6. 启动sddm启动显示管理器</span><br>systemctl <span class="hljs-built_in">enable</span> --now sddm  <span class="hljs-comment"># 注意选择Xorg协议登录用户而不是Wayland</span><br><br><br><span class="hljs-comment"># 7. zsh做好常用应用</span><br><span class="hljs-built_in">sudo</span> pacman -S paru<br>paru -S sof-firmware alsa-firmware alsa-ucm-conf<br>paru -S noto-fonts-cjk noto-fonts-emoji noto-fonts-extra  <span class="hljs-comment"># 谷歌开源字体及表情</span><br>paru -S ark<br>paru -S gwenview<br>paru -S git wget<br>paru -S microsoft-edge-stable-bin<br>paru -S archlinux-keyring<br>paru -S archlinuxcn-keyring<br>paru -S bluez bluez-utils<br><span class="hljs-built_in">sudo</span> modprobe btusb<br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> --now bluetooth.service<br><br><br><span class="hljs-comment"># 8. 检查家目录</span><br><span class="hljs-built_in">cd</span> ~<br><span class="hljs-built_in">ls</span> -hl<br>xdg-user-dirs-update<br><br><br><span class="hljs-comment"># 9. 非root用户的默认编辑器</span><br>vim ~/.zshrc  <span class="hljs-comment"># 添加export EDITOR=&#x27;vim&#x27;</span><br><br><br><span class="hljs-comment"># 10. v2rayn</span><br>paru -S v2rayn-bin<br><span class="hljs-comment"># 配置v2rayn,因为下面输入法的各种词库要用代理</span><br><br><br><span class="hljs-comment"># 11. 输入法改用pinyin,不用雾凇输入法</span><br><span class="hljs-comment"># https://www.debuggerx.com/2023/09/20/fcitx5-customizer/</span><br>paru -S fcitx5-im fcitx5-chinese-addons <br><br>vim ~/.config/environment.d/im.conf<br><span class="hljs-comment"># 加入以下内容</span><br><span class="hljs-comment"># fix fcitx problem</span><br>GTK_IM_MODULE=fcitx<br>QT_IM_MODULE=fcitx<br>XMODIFIERS=@im=fcitx<br><span class="hljs-comment"># INPUT_METHOD=fcitx</span><br>SDL_IM_MODULE=fcitx<br>GLFW_IM_MODULE=ibus<br><br>wget https://www.debuggerx.com/fcitx5_customizer/fcitx5_customizer.sh<br>sh fcitx5_customizer.sh<br></code></pre></td></tr></table></figure><h2 id="nvidia驱动">nvidia驱动</h2><p><a href="https://wiki.archlinuxcn.org/wiki/NVIDIA">https://wiki.archlinuxcn.org/wiki/NVIDIA</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">paru -S nvidia  <span class="hljs-comment"># 4060</span><br>paru -S nvidia-settings nvidia-utils lib32-nvidia-utils<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>win11</category>
      
      <category>双系统</category>
      
    </categories>
    
    
    <tags>
      
      <tag>win11</tag>
      
      <tag>archlinux</tag>
      
      <tag>双系统</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Win11蓝牙问题</title>
    <link href="/2024/11/24/win11%E8%93%9D%E7%89%99%E9%97%AE%E9%A2%98/"/>
    <url>/2024/11/24/win11%E8%93%9D%E7%89%99%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<blockquote><p>更新，在尝试双系统后，蓝牙竟然能用了，win和archlinux都能用，搞不懂。。。</p></blockquote><p><strong>电脑环境</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs powershell">OS: Windows <span class="hljs-number">11</span> (专业工作站版) x86_64<br>Host: T6AD (Standard)<br>Kernel: WIN32_NT <span class="hljs-number">10.0</span>.<span class="hljs-number">22631.4460</span> (<span class="hljs-number">23</span>H2)<br>Shell: Windows PowerShell <span class="hljs-number">5.1</span>.<span class="hljs-number">22621.4391</span><br>Terminal: Windows Terminal <span class="hljs-number">1.21</span>.<span class="hljs-number">3231.0</span><br>CPU: AMD Ryzen <span class="hljs-number">7</span> <span class="hljs-number">7435</span>HS (<span class="hljs-number">16</span>) <span class="hljs-selector-tag">@</span> <span class="hljs-number">4.55</span> GHz<br>GPU: NVIDIA GeForce RTX <span class="hljs-number">4060</span> Laptop GPU (<span class="hljs-number">7.77</span> GiB) [<span class="hljs-type">Discrete</span>]<br><br>CPU/Chipset: Realtek RTL8852BE<span class="hljs-literal">-CG</span><br>Bluetooth: 蓝牙<span class="hljs-number">5.2</span> 版本号<span class="hljs-number">1.9</span>.<span class="hljs-number">1051.3010</span>  <span class="hljs-comment"># 在设备管理器的Realtek Bluetooth Adapter里看</span><br></code></pre></td></tr></table></figure><br><p><strong>症状</strong>：刚开始时可以顺利连接上无线耳机，仅仅过了一天，蓝牙连不上无线耳机，尝试过<strong>重装系统</strong>、<strong>重装蓝牙驱动</strong>，但仍然无济于事。。。</p><br><h1>查看蓝牙相关服务</h1><p>win + r ，输入 services.msc ，找到下面三个服务，检查是否正在运行，</p><ul><li><strong>Bluetooth Support Service</strong> (蓝牙支持服务)</li><li><strong>Bluetooth Audio Gateway Service</strong> (蓝牙音频网关服务)</li><li><strong>Device Association Service</strong> (设备关联服务)</li></ul><br><h1>查看驱动启动情况</h1><p>设置 &gt; 蓝牙和其他设备 &gt; 显示更多设备 &gt; 更多蓝牙设置，点击 硬件 标签页，逐个双击打开查看事件是否正常，如下所示，(主要是adapter；device是微软自带的)</p><img src="/2024/11/24/win11%E8%93%9D%E7%89%99%E9%97%AE%E9%A2%98/image-20241124160841302.png" class="" title="image-20241124160841302"> <br><h1>重装驱动</h1><p>（1）下载原厂蓝牙驱动，或去 Realtek 官网找</p><p>（2）卸载蓝牙驱动，win + x 打开设备管理器，右键卸载所有蓝牙驱动</p><p>（3）操作 &gt; 添加驱动程序，选择要搜索驱动的位置，勾选 包括子文件夹，然后无脑下一步。扫描硬件。</p><img src="/2024/11/24/win11%E8%93%9D%E7%89%99%E9%97%AE%E9%A2%98/image-20241125122043737.png" class="" title="image-20241125122043737"> <p>前前后后试了这么多驱动。。。。</p>]]></content>
    
    
    <categories>
      
      <category>win11</category>
      
      <category>bluetooth</category>
      
    </categories>
    
    
    <tags>
      
      <tag>win11</tag>
      
      <tag>bluetooth</tag>
      
      <tag>realtek</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>博客搭建</title>
    <link href="/2024/11/23/build-blog/"/>
    <url>/2024/11/23/build-blog/</url>
    
    <content type="html"><![CDATA[<h1>hexo+fluid博客搭建(适配typora)</h1><blockquote><p>搭建完后，你可以放心用typora编辑md文档，用hexo部署网站</p></blockquote><br><h2 id="电脑环境："><strong>电脑环境</strong>：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell">OS: Windows <span class="hljs-number">11</span> (专业工作站版) x86_64<br>Host: T6AD (Standard)<br>Kernel: WIN32_NT <span class="hljs-number">10.0</span>.<span class="hljs-number">22631.4460</span> (<span class="hljs-number">23</span>H2)<br>Shell: Windows PowerShell <span class="hljs-number">5.1</span>.<span class="hljs-number">22621.4391</span><br>Terminal: Windows Terminal <span class="hljs-number">1.21</span>.<span class="hljs-number">3231.0</span><br>CPU: AMD Ryzen <span class="hljs-number">7</span> <span class="hljs-number">7435</span>HS (<span class="hljs-number">16</span>) <span class="hljs-selector-tag">@</span> <span class="hljs-number">4.55</span> GHz<br>GPU: NVIDIA GeForce RTX <span class="hljs-number">4060</span> Laptop GPU (<span class="hljs-number">7.77</span> GiB) [<span class="hljs-type">Discrete</span>]<br></code></pre></td></tr></table></figure><br><h2 id="安装Git和Nodejs："><strong>安装Git和Nodejs</strong>：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 记得开代理</span><br><span class="hljs-comment"># https://git-scm.com/downloads/win</span><br><span class="hljs-comment"># https://nodejs.org/en/download/package-manager</span><br>winget install <span class="hljs-literal">--id</span> Git.Git <span class="hljs-literal">-e</span> <span class="hljs-literal">--source</span> winget<br><br>node <span class="hljs-literal">-v</span><br>npm <span class="hljs-literal">-v</span><br>git <span class="hljs-literal">-v</span><br></code></pre></td></tr></table></figure><br><h2 id="安装hexo-cli："><strong>安装hexo-cli</strong>：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85</span><br><span class="hljs-comment"># 目录: C:\Users\joelee\AppData\Roaming\npm</span><br><span class="hljs-comment"># 命令 npm config list 查看npm配置</span><br>npm install <span class="hljs-literal">-g</span> hexo<span class="hljs-literal">-cli</span><br></code></pre></td></tr></table></figure><br><h3 id="hexo建站："><strong>hexo建站</strong>：</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># https://hexo.io/zh-cn/docs/setup</span><br><span class="hljs-built_in">cd</span> C:\Users\joelee\Me\blog<br><span class="hljs-comment"># 开代理,不成功的话删除所有文件即可</span><br>hexo init<br>npm install<br></code></pre></td></tr></table></figure><p><strong>项目文件夹</strong>(部分)如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs powershell">.<br>├── _config.yml   <span class="hljs-comment"># 网站的 配置 文件</span><br>├── package.json  <span class="hljs-comment"># 应用程序的信息,包括 EJS, Stylus 和 Markdown 渲染引擎</span><br>├── scaffolds     <span class="hljs-comment"># 模版 文件夹</span><br>├── source        <span class="hljs-comment"># 资源文件夹, 除 _posts 文件夹之外的`_.*`的文件/夹被忽略</span><br>|   ├── _drafts<br>|   └── _posts<br>└── themes       <span class="hljs-comment"># 主题 文件夹,用于生成静态网页</span><br></code></pre></td></tr></table></figure><br><h3 id="使用markdown嵌入图片："><strong>使用markdown嵌入图片</strong>：</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># https://github.com/hexojs/hexo-renderer-markdown-it/</span><br>npm un hexo<span class="hljs-literal">-renderer-marked</span> <span class="hljs-literal">--save</span><br>npm i hexo<span class="hljs-literal">-renderer-markdown-it</span> <span class="hljs-literal">--save</span><br></code></pre></td></tr></table></figure><p>修改或添加以下内容到 _config.yml ：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">post_asset_folder:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">markdown:</span>  <br>  <span class="hljs-comment"># hexo-renderer-markdown-it --start--</span><br>  <span class="hljs-comment"># https://github.com/hexojs/hexo-renderer-markdown-it/</span><br>  <span class="hljs-attr">anchors:</span><br>    <span class="hljs-attr">collisionSuffix:</span> <span class="hljs-string">&#x27;-1&#x27;</span><br>  <span class="hljs-attr">images:</span><br>    <span class="hljs-attr">lazyload:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">prepend_root:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># root=/blog/时,![text](/path/to/image.jpg) -&gt; &lt;img src=&quot;/blog/path/to/image.jpg&quot; alt=&quot;text&quot;&gt;</span><br>    <span class="hljs-attr">post_asset:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># image.jpg处于/2020/01/02/blog1_asset/image.jpg,那么![](image.jpg) -&gt; &lt;img src=&quot;/2020/01/02/blog1_asset/image.jpg&quot;&gt;</span><br>  <span class="hljs-comment"># hexo-renderer-markdown-it --end--</span><br></code></pre></td></tr></table></figure><br><p><strong>使用 hexo-renderer-markdown-it 的一个问题</strong>是，typora的引用图片和其他文件格式跟post_asset_folder开启后网页asset文件路径不对应，例如，在typora里引用一张图片，</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">![<span class="hljs-string">test.png</span>](<span class="hljs-link">helloworld/test.png</span>)<br></code></pre></td></tr></table></figure><p>但是在生成静态网页时，该图片的路径是，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">INFO  Generated: <span class="hljs-number">2024</span>/<span class="hljs-number">11</span>/<span class="hljs-number">23</span>/helloworld/test.png<br></code></pre></td></tr></table></figure><p>网页文档里图片的引用路径是，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">http://localhost:<span class="hljs-number">4000</span>/<span class="hljs-number">2024</span>/<span class="hljs-number">11</span>/<span class="hljs-number">23</span>/helloworld/helloworld/test.png<br></code></pre></td></tr></table></figure><p>因此导致图片无法正常展示。</p><p><strong>解决办法</strong>：安装<code>hexo-image-link</code>，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-image-link</span><br></code></pre></td></tr></table></figure><br><p><strong>hexo-image-link的问题</strong>是只处理类似 ![]()的格式，无法处理 []() 这样普通的文件链接，因此我尝试将它的源代码修改成，</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><br><span class="hljs-comment">// match markdown image and covert to asset_img </span><br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">filter</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;before_post_render&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">extractFilename</span>(<span class="hljs-params">path, sep</span>) &#123;<br>        <span class="hljs-keyword">return</span> path.<span class="hljs-title function_">split</span>(sep).<span class="hljs-title function_">pop</span>();<br>    &#125;<br><br>    <span class="hljs-comment">// detect ![]() or []() pattern and convert path</span><br>    data.<span class="hljs-property">content</span> = data.<span class="hljs-property">content</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(!)?\[([^\[\]\n]*)\]\((.*)\s?(?:&quot;.*&quot;)?\)/g</span>,<br>        <span class="hljs-keyword">function</span>(<span class="hljs-params">match_str, isImage, label, path</span>)&#123;<br>            <span class="hljs-keyword">if</span> (isImage) &#123;<br>                <span class="hljs-comment">// image link</span><br>                <span class="hljs-comment">// if only one /</span><br>                <span class="hljs-keyword">if</span>( (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>)).<span class="hljs-property">length</span> == <span class="hljs-number">2</span>)&#123;<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Image Path: &quot;</span> + match_str);<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;asset_img string: &quot;</span> + <span class="hljs-string">&quot;&#123;% asset_img &quot;</span> + (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>))[<span class="hljs-number">1</span>] + <span class="hljs-string">&quot; &quot;</span> +  label + <span class="hljs-string">&quot; %&#125;&quot;</span> );<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&#123;% asset_img \&quot;&quot;</span> + (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>))[<span class="hljs-number">1</span>] + <span class="hljs-string">&quot;\&quot; \&quot;&quot;</span> +  label + <span class="hljs-string">&quot;\&quot; %&#125;&quot;</span> <br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>)).<span class="hljs-property">length</span> == <span class="hljs-number">3</span>  &amp;&amp; path.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>) == <span class="hljs-string">&quot;./&quot;</span> )&#123;<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Image Path: &quot;</span> + match_str);<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&#123;% asset_img \&quot;&quot;</span> + (path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>))[<span class="hljs-number">2</span>] + <span class="hljs-string">&quot;\&quot; \&quot;&quot;</span> +  label + <span class="hljs-string">&quot;\&quot; %&#125;&quot;</span> <br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-comment">// console.debug(match_str);</span><br>                    <span class="hljs-comment">// console.debug(&quot;Label :&quot;+label);</span><br>                    <span class="hljs-comment">// console.debug(path);</span><br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Image Path does not exists!&quot;</span>);<br>                    <span class="hljs-keyword">return</span> match_str;<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">// regular link</span><br>                <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;\\&#x27;</span>) &amp;&amp; !path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;http&#x27;</span>)) &#123; <span class="hljs-comment">// Exclude URLs</span><br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Link Path: &quot;</span> + match_str);<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;link string: &quot;</span> + <span class="hljs-string">&quot;[&quot;</span> + label + <span class="hljs-string">&quot;](&quot;</span> + <span class="hljs-title function_">extractFilename</span>(path, <span class="hljs-string">&#x27;\\&#x27;</span>) + <span class="hljs-string">&quot;)&quot;</span>)<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;[&quot;</span> + label + <span class="hljs-string">&quot;](&quot;</span> + <span class="hljs-title function_">extractFilename</span>(path, <span class="hljs-string">&#x27;\\&#x27;</span>) + <span class="hljs-string">&quot;)&quot;</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;/&#x27;</span>) &amp;&amp; !path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;http&#x27;</span>)) &#123; <span class="hljs-comment">// Exclude URLs</span><br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;Markdown Link Path: &quot;</span> + match_str);<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;link string: &quot;</span> + <span class="hljs-string">&quot;[&quot;</span> + label + <span class="hljs-string">&quot;](&quot;</span> + <span class="hljs-title function_">extractFilename</span>(path, <span class="hljs-string">&#x27;/&#x27;</span>) + <span class="hljs-string">&quot;)&quot;</span>)<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;[&quot;</span> + label + <span class="hljs-string">&quot;](&quot;</span> + <span class="hljs-title function_">extractFilename</span>(path, <span class="hljs-string">&#x27;/&#x27;</span>) + <span class="hljs-string">&quot;)&quot;</span>;<br>                &#125;<br>                <span class="hljs-keyword">return</span> match_str;<br>            &#125;<br><br>        &#125;);<br><br>    <span class="hljs-comment">// detect &lt;img &gt; pattern and convert path</span><br>    data.<span class="hljs-property">content</span> = data.<span class="hljs-property">content</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;img[^&gt;]+src=&quot;([^&quot;]+)&quot;/g</span>, <br>        <span class="hljs-keyword">function</span>(<span class="hljs-params">matchstr,  path</span>)&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;img tag found&quot;</span>)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(data.<span class="hljs-property">source_dir</span>)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(data.<span class="hljs-property">path</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;img src=\&quot;/&quot;</span> + data.<span class="hljs-property">path</span> + path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">&quot;\&quot; &quot;</span><br>        &#125;);<br><br>    <span class="hljs-keyword">return</span> data;<br>&#125;);<br></code></pre></td></tr></table></figure><p>修改 package-lock.json和package.json，固定版本：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs json"># <span class="hljs-attr">&quot;hexo-image-link&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.6&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;hexo-image-link&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.0.6&quot;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><blockquote><p>目前问题是有些格式的文件不支持，例如 .ymp。但肯定的是 .txt 支持</p></blockquote><br><p><strong>pwsh快捷预览和部署网站命令</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 添加到 C:\Users\joelee\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexocgs</span></span> &#123;<br>    hexo clean<br>    hexo generate<br>    hexo server<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexod</span></span> &#123;<br>    hexo deploy<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexoc</span></span> &#123;<br>    hexo clean<br>&#125;<br></code></pre></td></tr></table></figure><br><h3 id="主题："><strong>主题</strong>：</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># fluid https://github.com/fluid-dev/hexo-theme-fluid</span><br>npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-theme-fluid</span><br><span class="hljs-built_in">cp</span> node_modules\hexo<span class="hljs-literal">-theme-fluid</span>\_config.yml .\_config.fluid.yml<br><br><span class="hljs-comment"># 修改_config.yml</span><br>theme: fluid<br>language: zh<span class="hljs-literal">-CN</span><br><br><span class="hljs-comment"># 创建&quot;关于&quot;页</span><br>hexo new page about<br><span class="hljs-comment"># 编辑 source/about/index.md ,添加 `layout: about`</span><br></code></pre></td></tr></table></figure><p>静态资源文件夹为 node_modules\hexo-theme-fluid\source 。</p><p>与该主题有关的插件的安装：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-generator-search</span><br>npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-math</span><br>npm uninstall hexo<span class="hljs-literal">-renderer-marked</span> <span class="hljs-literal">--save</span><br>npm install hexo<span class="hljs-literal">-renderer-pandoc</span> <span class="hljs-literal">--save</span><br>winget install <span class="hljs-literal">--source</span> winget <span class="hljs-literal">--exact</span> <span class="hljs-literal">--id</span> JohnMacFarlane.Pandoc<br></code></pre></td></tr></table></figure><p>修改相关的模板文件，包括刚才创建的about/index.md，酌情添加：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">categories:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Sports</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Baseball</span><br><span class="hljs-attr">tags:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Injury</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Fight</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Shocking</span><br><span class="hljs-attr">math:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">mermaid:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>fluid代码块设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">highlight:</span><br>    <span class="hljs-attr">highlightjs:</span><br>      <span class="hljs-comment"># 在链接中挑选 style 填入</span><br>      <span class="hljs-comment"># Select a style in the link</span><br>      <span class="hljs-comment"># See: https://highlightjs.org/demo/</span><br>      <span class="hljs-attr">style:</span> <span class="hljs-string">&quot;github gist&quot;</span><br>      <span class="hljs-attr">style_dark:</span> <span class="hljs-string">&quot;github-dark-dimmed&quot;</span><br></code></pre></td></tr></table></figure><br><h2 id="部署网站："><strong>部署网站</strong>：</h2><p>（1）登录 GitHub，新建一个 Repository，Repository name一定要是<code>你的用户名</code>.github.io</p><p>（2）复制仓库https链接，粘贴到<code>_config.yml</code>里：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">&#x27;git&#x27;</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/joelee-hit/joelee-hit.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br></code></pre></td></tr></table></figure><p>后期要用ssh的链接代替https链接。</p><p>（3）安装插件，开始推送到仓库进行部署，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install hexo<span class="hljs-literal">-deployer-git</span> <span class="hljs-literal">--save</span><br>hexo clean<br>hexo generate<br>hexo deploy<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
      <category>hexo+typora</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
      <tag>typora</tag>
      
      <tag>fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>helloworld</title>
    <link href="/2024/11/23/helloworld/"/>
    <url>/2024/11/23/helloworld/</url>
    
    <content type="html"><![CDATA[<h1>公式测试</h1><h2 id="内联">内联</h2><p>$\pi$</p><h2 id="单独一行">单独一行</h2><p>$$<br>a = b + \sum\limits_{i=0}^N c_i<br>$$</p><h1>mermaid 测试</h1><pre><code class=" mermaid">classDiagramClass01 &lt;|-- AveryLongClass : CoolClass03 *-- Class04Class05 o-- Class06Class07 .. Class08Class09 --&gt; C2 : Where am i?Class09 --* C3Class09 --|&gt; Class07Class07 : equals()Class07 : Object[] elementDataClass01 : size()Class01 : int chimpClass01 : int gorillaClass08 &lt;--&gt; C2: Cool label</code></pre><h1>代码块测试</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hello world!\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h1>引用文件</h1><p>点击可以跳转，参照 <a href="https://lasonneil.github.io/2023/07/07/posts/Hexo%E6%B7%BB%E5%8A%A0%E9%99%84%E4%BB%B6%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD/">Hexo添加附件下载功能 | 清河的博客</a></p><p><a href="c.c">c.c</a></p><p><a href="config_fluid.txt">config_fluid</a></p><img src="/2024/11/23/helloworld/test.png" class="" title="test">]]></content>
    
    
    <categories>
      
      <category>Test</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Test</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
